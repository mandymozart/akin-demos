window.SubxReferUrl='staging.lrb.co.uk'; window.SubxDNT=1;var scriptTime = '2025-08-21 15:31:20'; window.SubxClientEvents = {
    blueConic: 0,
    scriptGroup: "ProdUK",
    scriptDomain: "ProdUK",
    userCountry: "UnknownCountry",
    maxTime: 0,
    gtmstatus: 0,
    accountNo: '',
    versionNo: '20250821153120',
    contentObject: {},
    hideContent: 0,
    referObject: {},
    sxpw: false,
    axpw: false,
    oxpw: false,
    sessionSet: false,
    hasarticleaccess: false,
    isLoggedIn: false,
    hasSub: false,
    CheckDaily: 1,
    is_first_twitter: false,
    triggerEvent: function () {
        if (window.ZITFunctions.isDNT == 0 && window.ZITFunctions.dlEnabled) {
            var dataLayerName = window.ZITFunctions.dataLayerName;
            if (window.google_tag_manager && typeof window.google_tag_manager[dataLayerName] != "undefined" && typeof window.google_tag_manager[dataLayerName].dataLayer != "undefined" && window.google_tag_manager[dataLayerName].dataLayer.get('content'))
                return true;
            else {
                return false;
            }
        }
        else {
            window.ZITUtils.writeDebug("read From DataLayer is disabled");
            window.ZITFunctions.resetGTMAcc();
            window.ZITFunctions.isAnalysisProcessed = true;
            window.SubxClientEvents.gtmstatus = 0;
            return true;
        }
    },
    readfromWindowsObject: function () {
        var windowObject = window.dataLayer.find(obj => obj.key = "lrb-subx");
        if (windowObject) {
            this.sxpw = windowObject['s_pw'];
            this.referObject = windowObject['referrer'];
            var content = windowObject['content'];
            this.contentObject = content;
            window.ZITUtils.writeDebug("content:" + JSON.stringify(content));
            if (content && content != null) {
                window.ZITFunctions.dataLayerValue += "&dName1=author&dValue1=" + content.author;
                window.ZITUtils.writeDebug("author:" + content.author);
                window.ZITFunctions.dataLayerValue += "&dName2=content_type&dValue2=" + content.content_type;
                window.ZITUtils.writeDebug("content_type:" + content.content_type);
                window.ZITFunctions.dataLayerValue += "&dName3=tags&dValue3=" + content.tags;
                window.ZITUtils.writeDebug("tags:" + content.tags);
                if (this.referObject.twitter)
                    this.is_first_twitter = (content.content_type == "Article" && this.sxpw && trackingData.extRefer == "" && this.referObject.twitter && url.indexOf("/the-paper/v35/n04/hilary-mantel/royal-bodies") < 0 && url.indexOf("/the-paper/v45/n03/andrew-o-hagan/off-his-royal-tits") < 0);
                else
                    this.is_first_twitter = false;
            }
            var dataoxpw = windowObject['o_pw'];
            if (dataoxpw)
                this.oxpw = true;
            else
                this.oxpw = false;
            dataoxpw = windowObject['a_pw'];
            if (dataoxpw)
                this.axpw = true;
            else
                this.axpw = false;
            this.sessionSet = windowObject['session_set'];
            window.ZITFunctions.dataLayerValue += "&dName4=s_pw&dValue4=" + this.sxpw;
            window.ZITUtils.writeDebug("s_pw:" + this.sxpw);
            window.ZITFunctions.dataLayerValue += "&dName5=refer&dValue5=" + encodeURIComponent(referrer);
            window.ZITUtils.writeDebug("referrer:" + referrer);
            window.ZITFunctions.dataLayerValue += "&dName12=twitter&dValue12=" + this.referObject.twitter;
            window.ZITUtils.writeDebug("referObject:" + JSON.stringify(this.referObject));
            this.hasarticleaccess = windowObject['has_article_access'];
            window.ZITFunctions.dataLayerValue += "&dName6=has_article_access&dValue6=" + this.hasarticleaccess;
            window.ZITUtils.writeDebug("has_article_access:" + this.hasarticleaccess);
            window.ZITFunctions.dataLayerValue += "&dName7=logged_in&dValue7=" + this.isLoggedIn;
            window.ZITUtils.writeDebug("isloggedIn:" + this.isLoggedIn);
            window.ZITFunctions.dataLayerValue += "&dName8=has_personal_sub&dValue8=" + this.hasSub;
            window.ZITUtils.writeDebug("hasSub:" + this.hasSub);
            window.ZITFunctions.dataLayerValue += "&dName9=is_first_twitter&dValue9=" + this.is_first_twitter;
            window.ZITUtils.writeDebug("is_first_twitter:" + this.is_first_twitter);
            window.ZITFunctions.dataLayerValue += "&dName10=o_pw&dValue10=" + this.oxpw;
            window.ZITUtils.writeDebug("o_pw:" + this.oxpw);
            var specialSec = window.ZITUtils.readCookie('_pc_mantel');
            window.ZITFunctions.dataLayerValue += "&dName11=specialSec&dValue11=" + specialSec;
            window.ZITUtils.writeDebug("specialSec:" + specialSec);
            var userId = windowObject['user_id'];
            if (userId && userId != null)
                window.ZITFunctions.dataLayerValue += "&dName24=user_id&dValue24=" + userId;
            else
                window.ZITFunctions.dataLayerValue += "&dName24=user_id&dValue24=0";
            var sessionSet = windowObject['session_set'];
            window.ZITFunctions.dataLayerValue += "&dName13=session_set&dValue13=" + sessionSet;
            var articleaccesstype = windowObject['article_access_type'];
            window.ZITFunctions.dataLayerValue += "&dName14=article_access_type&dValue14=" + articleaccesstype;
            var subscriptiontype = windowObject['subscription_type'];
            window.ZITFunctions.dataLayerValue += "&dName15=subscription_type&dValue15=" + subscriptiontype;
            var issuesleft = windowObject['issues_left'];
            window.ZITFunctions.dataLayerValue += "&dName16=issues_left&dValue16=" + issuesleft;
            var hasinstaccess = windowObject['has_inst_access'];
            window.ZITFunctions.dataLayerValue += "&dName17=has_inst_access&dValue17=" + hasinstaccess;
            var isinstadmin = windowObject['is_inst_admin'];
            window.ZITFunctions.dataLayerValue += "&dName18=is_inst_admin&dValue18=" + isinstadmin;
            var hasdiscaccess = windowObject['has_disc_access'];
            window.ZITFunctions.dataLayerValue += "&dName19=has_disc_access&dValue19=" + hasdiscaccess;
            var instaccessmethod = windowObject['inst_access_method'];
            window.ZITFunctions.dataLayerValue += "&dName20=inst_access_method&dValue20=" + instaccessmethod;
            var inst_name = windowObject['inst_name'];
            window.ZITFunctions.dataLayerValue += "&dName21=inst_name&dValue21=" + inst_name;
            window.ZITFunctions.dataLayerValue += "&dName22=a_pw&dValue22=" + this.axpw;
            var referrer = windowObject['referrer'];
            window.ZITFunctions.dataLayerValue += "&dName23=referrer&dValue23=" + JSON.stringify(referrer);
            if (content) {
                var extraData = {
                    article_type: content.article_type,
                    author: content.author,
                    category: content.category,
                    content_type: content.content_type,
                    datePublished: content.datePublished,
                    section: content.section,
                    wordcount: content.wordcount
                };
                window.ZITFunctions.dataLayerValue += "&extraData=" + encodeURIComponent(JSON.stringify(extraData));
                window.ZITUtils.writeDebug("extraData:" + encodeURIComponent(JSON.stringify(extraData)));
            }
        }
        window.ZITFunctions.isAnalysisProcessed = true;
        window.SubxClientEvents.gtmstatus = 1;
    },
    readFromDataLayer: function () {
        var maxTime = window.SubxClientEvents.maxTime;
        var host = window.ZITFunctions.host();
        var dataLayerName = window.ZITFunctions.dataLayerName;
        window.ZITUtils.writeDebug("Datalayer " + host + ' ' + dataLayerName);
        window.SubxClientEvents.retrieveData();
        if (typeof window.google_tag_manager == "undefined" || window.google_tag_manager[dataLayerName] == null || typeof window.google_tag_manager[dataLayerName] == "undefined") {
            return window.SubxClientEvents.readfromWindowsObject()
        }
        var content = window.google_tag_manager[dataLayerName].dataLayer.get('content');
        this.contentObject = content;
        var url = window.location.href.toLowerCase();
        var trackingData = window.ZITFunctions.InitiateTrackingData();
        var referrer = trackingData.extRefer;
        this.sxpw = window.google_tag_manager[dataLayerName].dataLayer.get('s_pw');
        this.referObject = window.google_tag_manager[dataLayerName].dataLayer.get('referrer');
        window.ZITUtils.writeDebug("content:" + JSON.stringify(content));
        if (content && content != null) {
            window.ZITFunctions.dataLayerValue += "&dName1=author&dValue1=" + content.author;
            window.ZITUtils.writeDebug("author:" + content.author);
            window.ZITFunctions.dataLayerValue += "&dName2=content_type&dValue2=" + content.content_type;
            window.ZITUtils.writeDebug("content_type:" + content.content_type);
            window.ZITFunctions.dataLayerValue += "&dName3=tags&dValue3=" + content.tags;
            window.ZITUtils.writeDebug("tags:" + content.tags);
            if (this.referObject.twitter)
                this.is_first_twitter = (content.content_type == "Article" && this.sxpw && trackingData.extRefer == "" && this.referObject.twitter && url.indexOf("/the-paper/v35/n04/hilary-mantel/royal-bodies") < 0 && url.indexOf("/the-paper/v45/n03/andrew-o-hagan/off-his-royal-tits") < 0);
            else
                this.is_first_twitter = false;
        }
        var dataoxpw = window.google_tag_manager[dataLayerName].dataLayer.get('o_pw');
        if (dataoxpw)
            this.oxpw = true;
        else
            this.oxpw = false;
        dataoxpw = window.google_tag_manager[dataLayerName].dataLayer.get('a_pw');
        if (dataoxpw)
            this.axpw = true;
        else
            this.axpw = false;
        this.sessionSet = window.google_tag_manager[dataLayerName].dataLayer.get('session_set');
        window.ZITFunctions.dataLayerValue += "&dName4=s_pw&dValue4=" + this.sxpw;
        window.ZITUtils.writeDebug("s_pw:" + this.sxpw);
        window.ZITFunctions.dataLayerValue += "&dName5=refer&dValue5=" + encodeURIComponent(referrer);
        window.ZITUtils.writeDebug("referrer:" + referrer);
        window.ZITFunctions.dataLayerValue += "&dName12=twitter&dValue12=" + this.referObject.twitter;
        window.ZITUtils.writeDebug("referObject:" + JSON.stringify(this.referObject));
        this.hasarticleaccess = window.google_tag_manager[dataLayerName].dataLayer.get('has_article_access');
        window.ZITFunctions.dataLayerValue += "&dName6=has_article_access&dValue6=" + this.hasarticleaccess;
        window.ZITUtils.writeDebug("has_article_access:" + this.hasarticleaccess);
        window.ZITFunctions.dataLayerValue += "&dName7=logged_in&dValue7=" + this.isLoggedIn;
        window.ZITUtils.writeDebug("isloggedIn:" + this.isLoggedIn);
        window.ZITFunctions.dataLayerValue += "&dName8=has_personal_sub&dValue8=" + this.hasSub;
        window.ZITUtils.writeDebug("hasSub:" + this.hasSub);
        window.ZITFunctions.dataLayerValue += "&dName9=is_first_twitter&dValue9=" + this.is_first_twitter;
        window.ZITUtils.writeDebug("is_first_twitter:" + this.is_first_twitter);
        window.ZITFunctions.dataLayerValue += "&dName10=o_pw&dValue10=" + this.oxpw;
        window.ZITUtils.writeDebug("o_pw:" + this.oxpw);
        var specialSec = window.ZITUtils.readCookie('_pc_mantel');
        window.ZITFunctions.dataLayerValue += "&dName11=specialSec&dValue11=" + specialSec;
        window.ZITUtils.writeDebug("specialSec:" + specialSec);
        var userId = window.google_tag_manager[dataLayerName].dataLayer.get('user_id');
        if (userId && userId != null)
            window.ZITFunctions.dataLayerValue += "&dName24=user_id&dValue24=" + userId;
        else
            window.ZITFunctions.dataLayerValue += "&dName24=user_id&dValue24=0";
        var sessionSet = window.google_tag_manager[dataLayerName].dataLayer.get('session_set');
        window.ZITFunctions.dataLayerValue += "&dName13=session_set&dValue13=" + sessionSet;
        var articleaccesstype = window.google_tag_manager[dataLayerName].dataLayer.get('article_access_type');
        window.ZITFunctions.dataLayerValue += "&dName14=article_access_type&dValue14=" + articleaccesstype;
        var subscriptiontype = window.google_tag_manager[dataLayerName].dataLayer.get('subscription_type');
        window.ZITFunctions.dataLayerValue += "&dName15=subscription_type&dValue15=" + subscriptiontype;
        var issuesleft = window.google_tag_manager[dataLayerName].dataLayer.get('issues_left');
        window.ZITFunctions.dataLayerValue += "&dName16=issues_left&dValue16=" + issuesleft;
        var hasinstaccess = window.google_tag_manager[dataLayerName].dataLayer.get('has_inst_access');
        window.ZITFunctions.dataLayerValue += "&dName17=has_inst_access&dValue17=" + hasinstaccess;
        var isinstadmin = window.google_tag_manager[dataLayerName].dataLayer.get('is_inst_admin');
        window.ZITFunctions.dataLayerValue += "&dName18=is_inst_admin&dValue18=" + isinstadmin;
        var hasdiscaccess = window.google_tag_manager[dataLayerName].dataLayer.get('has_disc_access');
        window.ZITFunctions.dataLayerValue += "&dName19=has_disc_access&dValue19=" + hasdiscaccess;
        var instaccessmethod = window.google_tag_manager[dataLayerName].dataLayer.get('inst_access_method');
        window.ZITFunctions.dataLayerValue += "&dName20=inst_access_method&dValue20=" + instaccessmethod;
        var inst_name = window.google_tag_manager[dataLayerName].dataLayer.get('inst_name');
        window.ZITFunctions.dataLayerValue += "&dName21=inst_name&dValue21=" + inst_name;
        window.ZITFunctions.dataLayerValue += "&dName22=a_pw&dValue22=" + this.axpw;
        var referrer = window.google_tag_manager[dataLayerName].dataLayer.get('referrer');
        window.ZITFunctions.dataLayerValue += "&dName23=referrer&dValue23=" + JSON.stringify(referrer);
        if (content) {
            var extraData = {
                article_type: content.article_type,
                author: content.author,
                category: content.category,
                content_type: content.content_type,
                datePublished: content.datePublished,
                section: content.section,
                wordcount: content.wordcount
            };
            window.ZITFunctions.dataLayerValue += "&extraData=" + encodeURIComponent(JSON.stringify(extraData));
            window.ZITUtils.writeDebug("extraData:" + encodeURIComponent(JSON.stringify(extraData)));
        }
        window.ZITFunctions.isAnalysisProcessed = true;
        window.SubxClientEvents.gtmstatus = 1;
    },
    retrieveRegMember: function (brandId) {
    },
    isSpecialSection: function () {
        var specialSec = window.ZITUtils.readCookie('_pc_mantel');
        if (specialSec && specialSec == 'yes' && this.contentObject.content_type == "Article") //twitter take priority
        {
            window.ZITUtils.writeDebug("Special mantel detected.");
            return true;
        }
        else {
            window.ZITUtils.writeDebug("Not special mantel path.");
            return false;
        }
    },
    specialPath: function () {
        var url = window.location.href.toLowerCase();
        if (url.indexOf("/4d422a2b-60d3-457f-8754-e8a09ebe3fb1") >= 0) {
            if (this.sxpw)
                return true;
            else
                return false;
        }
        else if (this.contentObject.content_type == "Blog Post" && this.sxpw && !this.oxpw)
            return true;
        else if (this.axpw)
            return true;
        else {
            var trackingData = window.ZITFunctions.retrieveTrackingData();
            if (trackingData.extRefer != "") //the second article from twitter
                return true;
            else {
                return false;
            }
        }
    },
    isArticle: function () {
        var content = this.contentObject;
        var url = window.location.href.toLowerCase();
        if (content && content != null) {
            window.ZITUtils.writeDebug("Retrieve article from " + content.content_type + " " + this.sxpw + " " + url);
            if (!this.specialPath() && !this.setArticleId()) {
                window.ZITUtils.writeDebug("Exclude by not special Path and article history");
                return false;
            }
            else if (this.is_first_twitter) //first article from Twitter
            {
                window.ZITUtils.writeDebug("Exclude by twitter 1st article");
                return false;
            }
            else if (content.content_type != "Article" && !this.axpw) {
                window.ZITUtils.writeDebug("Exclude by not an article and not a_pw");
                return false;
            }
            else if (this.sxpw && !this.oxpw && content.content_type != "TOC" && content.content_type != "Homepage") {
                window.ZITUtils.writeDebug("Include by s_pw and not o_pw");
                return true;
            }
            else if (this.axpw) {
                window.ZITUtils.writeDebug("Include by a_pw");
                return true;
            }
            else if (content.content_type == "Article" && !this.sessionSet) {
                window.ZITUtils.writeDebug("Include by an article and not sessionSet");
                return true;
            }
            else if ((url.indexOf("/blog/2022/march/don-t-call-the-police") >= 0 || url.toLowerCase().indexOf("/blog/2022/january/home-furnishings-and-body-armour") >= 0 || url.toLowerCase().indexOf("/blog/2023/january/in-sinai") >= 0) && this.sxpw)
                return true;
            else if (url.indexOf("4d422a2b-60d3-457f-8754-e8a09ebe3fb1") >= 0 && this.sxpw)
                return true;
            else
                return false;
        }
        else
            window.ZITUtils.writeDebug("No content object detected ");
    },
    retrieveData: function () {
        try {
            var trackingData = window.ZITFunctions.InitiateTrackingData();
            var dataLayerName = window.ZITFunctions.dataLayerName;
            var windowObject = window.dataLayer.find(obj => obj.key = "lrb-subx");
            if (window.ZITFunctions.isDNT == 1) {
                this.isLoggedIn = windowObject['logged_in']
                this.hasSub = windowObject['has_personal_sub'];
            }
            else {
                this.isLoggedIn = window.google_tag_manager[dataLayerName].dataLayer.get('logged_in');
                this.hasSub = window.google_tag_manager[dataLayerName].dataLayer.get('has_personal_sub');
            }
            if (this.isLoggedIn) {
                if (trackingData.isEmailAud == 0) {
                    window.ZITUtils.createCookie('_spw', "", -1);
                    var currentOffer = window.ZITUtils.readCookie('_doffer');
                    if (currentOffer && currentOffer != null)
                        window.ZITUtils.createCookieinDetails("_doffer", currentOffer, 0, 0, 20, 0);
                    window.ZITUtils.writeDebug("Clear pre-login cookie ");
                }
                window.ZITFunctions.setEmailAud();
            }
            else {
                if (trackingData.isEmailAud == 1) {
                    window.ZITUtils.createCookie('_spw', "", -1);
                    var currentOffer = window.ZITUtils.readCookie('_doffer');
                    if (currentOffer && currentOffer != null)
                        window.ZITUtils.createCookieinDetails("_doffer", currentOffer, 0, 0, 20, 0);
                    window.ZITFunctions.setLogOut();
                    window.ZITUtils.writeDebug("Clear after-login cookie ");
                }
            }
        }
        catch (error) {
            console.error('retrieveRegMember error:' + error);
        }
    },
    retriveArticleIdFromJourneyData: function () {
        if (this.contentObject && this.contentObject != null) {
            var articleId = this.contentObject.article_id;
            window.ZITUtils.writeDebug("Article retrieved " + articleId);
            return articleId;
        }
        else
            return 'NA';
    },
    checkArticleIdFromCookie: function (articleId) {
        var aStr = window.ZITUtils.localStorageStore('_aHis');
        if (aStr == null || typeof aStr == "undefined" || window.ZITFunctions.testMode) {
            return false;
        }
        else {
            var articleLists = aStr.split(",");
            for (var i = 0; i < articleLists.length; i++) {
                if (articleLists[i] == articleId)
                    return true;
            }
            return false;
        }
    },
    addArticleId: function () {
        var articleId = this.retriveArticleIdFromJourneyData();
        var found = this.checkArticleIdFromCookie(articleId);
        var url = window.location.href.toLowerCase();
        if (found) {
            window.ZITUtils.writeDebug("The article has been counted before " + articleId);
        }
        else if (!window.ZITFunctions.testMode) {
            var aStr = window.ZITUtils.localStorageStore('_aHis');
            if (typeof aStr == "undefined" || aStr == null || aStr == "")
                aStr = articleId;
            else
                aStr = aStr + "," + articleId;
            window.ZITUtils.writeDebug("The article has been added to the history " + articleId);
            window.ZITUtils.localStorageStore('_aHis', aStr);
            if (this.referObject.twitter) {
                window.ZITUtils.writeDebug("Twitter privilege has been used up " + articleId);
                var trackingData = window.ZITFunctions.retrieveTrackingData();
                trackingData.extRefer = document.referrer;
                window.ZITFunctions.saveTrackingDataToSxo(trackingData);
            }
            else if (url.indexOf("/the-paper/v35/n04/hilary-mantel/royal-bodies") >= 0 && !this.isLoggedIn && !this.hasSub) {
                window.ZITUtils.createCookieinDetails('_pc_mantel', 'yes', 30, 0, 0, 0);
                window.ZITUtils.writeDebug("Special mantel cookie put.");
            }
        }
    },
    setArticleId: function () {
        if (this.specialPath())
            return false;
        var articleId = this.retriveArticleIdFromJourneyData();
        if (articleId != null && typeof articleId != "undefined" && articleId != "") {
            var found = this.checkArticleIdFromCookie(articleId);
            if (found) {
                window.ZITUtils.writeDebug("The article has been counted before ");
                return false;
            }
            return true;
        }
        else {
            window.ZITUtils.writeDebug("No article Id retrieved ");
            return false;
        }
    },
    getParagraph: function () {
    },
    addtoQuery: function () {
        var specialQuery = "";
        var spw = window.ZITUtils.readCookie("_spw");
        if (((typeof spw != "undefined" && spw > 0) || this.specialPath()) && window.ZITFunctions.datawall == 1 && (window.ViewerLoader.accessresult == 0 || window.ViewerLoader.accessresult == 5))
            specialQuery = specialQuery + "&keyword=datawall";
        return specialQuery;
    },
    formCustomizedClickString: function () {
        return "&is_subx=true";
    },
    RetrieveCategory: function () {
        var categoryNo = parseInt(window.ZITFunctions.categoryNo);
        if (categoryNo > 0) {
            var url = window.location.href.replace("https://", "");
            var ucomponents = url.split('/');
            if (ucomponents && ucomponents.length > categoryNo) {
                window.ZITFunctions.keyword = ucomponents[categoryNo];
            }
            if (window.ZITFunctions.keyword != '' && window.ZITFunctions.newpage)
                window.ZITFunctions.updateCategoryInfo(window.ZITFunctions.keyword);
        }
    },
    sendDataEvent: function (dataid, actionName, canvasId, brandId, userCode) {
        //this.sendGADataEvent(dataid, actionName, category);
        if (brandId == 1066) {
            var canvasData = window.ZITFunctions.retrieveCanvasDataFrmCookie(canvasId);
            window.ZITUtils.writeDebug("sendDataEvent " + dataid + "#" + actionName + "#" + canvasId + "#" + brandId + "#" + JSON.stringify(canvasData));
            if (typeof gtag == "undefined") {
                var trackingData = window.ZITFunctions.InitiateTrackingData();
                this.accountNo = trackingData.accNo;
                if (this.accountNo != "") {
                    window.ZITloader.loadDependencies('https://www.googletagmanager.com/gtag/js?id=' + this.accountNo).then(function () {
                        window.dataLayer = window.dataLayer || [];
                        function gtag() { dataLayer.push(arguments); }
                        gtag('js', new Date());
                        gtag('config', this.accountNo);
                    });
                }
                else
                    window.ZITUtils.writeDebug("GA Account is not defined " + this.accountNo);
            }
            else
                window.ZITUtils.writeDebug("GA is not defined " + dataid);
            if ((dataid == 44 || dataid == 41 || dataid == 42) && canvasData.canvasCG > 1) {
                window.gtag('event', 'Shown', {
                    'send_to': 'GA4', 'event_category': 'Paywall',
                    'value': canvasId, 'non_interaction': true
                });
            }
            else if ((dataid == 44 || dataid == 41 || dataid == 42) && canvasData.canvasCG <= 0) {
                window.gtag('event', 'Placement Loaded', {
                    'send_to': 'GA4', 'event_category': 'SubX',
                    'value': canvasId, 'non_interaction': true
                });
            }
            else if (dataid == 11 || dataid == 111 || actionName.indexOf("Action ") >= 0) {
                if (canvasData.canvasCG > 1) {
                    var buttonLabel = actionName.toUpperCase().indexOf("SIGN") >= 0 || actionName.toUpperCase().indexOf("LOGIN") >= 0 ? "Login Button" : "Subscribe Button";
                    window.gtag('event', 'Button Click', {
                        'send_to': 'GA4', 'event_category': 'Paywall',
                        'value': canvasId, 'event_label': buttonLabel
                    });
                }
                else {
                    window.gtag('event', 'Placement CTA Clicked', {
                        'send_to': 'GA4', 'event_category': 'SubX',
                        'event_label': actionName, 'value': canvasId
                    });
                }
            }
            else if (actionName == "AutoOpenSlide" || actionName == "AutoOpenModal") {
                window.gtag('event', 'Placement Shown', {
                    'send_to': 'GA4', 'event_category': 'SubX',
                    'value': canvasId, 'non_interaction': true
                });
            }
            else if (actionName == "OpenSlide") {
                window.gtag('event', 'Placement Shown', {
                    'send_to': 'GA4', 'event_category': 'SubX',
                    'value': canvasId, 'non_interaction': true
                });
                window.gtag('event', 'Placement Expanded', {
                    'send_to': 'GA4', 'event_category': 'SubX',
                    'value': canvasId
                });
            }
            else if (actionName == "ShowFixCanvas") {
                window.gtag('event', 'Placement Shown', {
                    'send_to': 'GA4', 'event_category': 'SubX',
                    'value': canvasId, 'non_interaction': true
                });
            }
            else if (actionName == 'CloseModel') {
                if (canvasData.canvasAn == "popup") {
                    window.gtag('event', 'Placement Closed', {
                        'send_to': 'GA4', 'event_category': 'SubX',
                        'value': canvasId
                    });
                }
                else {
                    window.gtag('event', 'Placement Collapsed', {
                        'send_to': 'GA4', 'event_category': 'SubX',
                        'value': canvasId
                    });
                }
            }
            else
                window.ZITUtils.writeDebug("GA event not sending for action " + dataid);
        }
        else
            window.ZITUtils.writeDebug("GA event not sending for brand " + brandId);
    },
    InitiateEvents: function () {
    },
    AfterCanvasInitialization: function () {
        var fixContainers = document.querySelectorAll(".zeddit-rcm");
        if (window.IntersectionObserver) {
            const fixcallback = (entries, observer) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        var animationType = entry.target.getAttribute('animation-type');
                        var canvases = entry.target.getElementsByClassName('zit-widget-wrapper--new-panel');
                        if (canvases != null && canvases.length > 0) {
                            var canvasId = canvases[0].getAttribute('data-wid');
                            window.ZITUtils.writeDebug("Canvas become active " + canvasId + " " + animationType);
                            if (animationType != "slide" || animationType != "popup") {
                                window.ZITFunctions.sendGAData(0, 'ShowFixCanvas', canvasId, false);
                                observer.unobserve(entry.target);
                            }
                            else
                                window.ZITUtils.writeDebug('Canvas ' + canvasId + " skip of type " + animationType);
                        }
                        else
                            window.ZITUtils.writeDebug("No widget wrapper detected.");
                    }
                });
            };
            window.ZITUtils.writeDebug(fixContainers.length + " container has been added.");
            fixContainers.forEach((target) => {
                window.ZITUtils.writeDebug(target.getAttribute('animation-type') + " " + target.getAttribute('data-iscg') + " added.");
                const observer = new IntersectionObserver(fixcallback);
                observer.observe(target);
            });
        }
        else
            window.ZITUtils.writeDebug('IntersectionObserver not found');
    },
    getContainer: function () {
        return document.getElementsByTagName("subxtechbodystart");
    },
    getAnimateContainer: function () {
        var doc = document.getElementsByTagName("main");
        if (doc == null || doc.length <= 0)
            doc = document.getElementsByTagName("body");
        try {
            return doc[0];
        }
        catch (error) {
            window.ZITUtils.writeDebug("Error in getAnimateContainer:" + JSON.stringify(error));
            return null;
        }
    },
    getCSS: function () {
        var cssHtml = "#lrb-articleCopy .article-content main { overflow-y: hidden; pointer-events: none !important; user-select: none; height:800px; -moz-animation: 800ms ease 0s normal none infinite swing;}";
        cssHtml += ".zeddit-rcm.loaded{z-index:4 !important;}";
        return cssHtml;
    },
    customizeMasking: function (data) {
        window.ZITUtils.writeDebug("Animation Type Customized BlockContent:" + data.response.CurCanvas.animationType);

        var docElem = document.getElementsByTagName("html");
        docElem[0].classList.add("lrb-paywall");
        var truncated = false;
        if (window.SubxClientEvents.contentObject.content_type == "Blog Post") {
            var containers = document.querySelectorAll('.post .post-content .ezrichtext-field>*');
            if (containers && containers.length > 3) {
                window.ZITUtils.writeDebug("Total paragraphs in the post:" + containers.length);
                for (i = 3; i <= containers.length - 1; i++) {
                    containers[i].remove();
                    truncated = true;
                }
            }
            else
                window.ZITUtils.writeDebug("No paragraphs in the post");
        }
        else {
            var containers = document.querySelectorAll('#lrb-articleCopy .article-content .article-copy>*');
            if (containers && containers.length > 3) {
                for (i = 3; i <= containers.length - 1; i++) {
                    containers[i].remove();
                    truncated = true;
                }
            }
        }
        window.ZITUtils.writeDebug("Truncated happend:" + truncated);
        var sheet = document.createElement('style');
        if (typeof window.SubxClientEvents.getCSS != "undefined") {
            sheet.id = "SubxSyleMask";
            sheet.innerHTML = "";
            sheet.innerHTML += window.SubxClientEvents.getCSS();
        }
        else
            window.ZITUtils.writeDebug("No customized css.");
        if (window.SubxClientEvents.contentObject.content_type != "Blog Post") {
            //var element = document.querySelector("#lrb-articleCopy .article-content .article-copy");
            //if (element) {
            //    var truncateEle = element.querySelectorAll(".lrb-truncated-article-copy");
            //    if (!truncateEle || truncateEle.length <= 0) {
            //        var cshtml = "<div class=\"lrb-truncated-article-copy\"><p>Please login or <a href=\"/subscribe\" title=\"Subscribe\">subscribe</a> to read the full article.</p><p><a href=\"/login\" title=\"Login\" class=\"btn btn-primary\">Login</a></p></div>";
            //        element.insertAdjacentHTML('afterend', cshtml);
            //    }
            //    else
            //        window.ZITUtils.writeDebug("truncate html body already added ");
            //}
            var datawall = document.querySelectorAll("#lrb-pw-block");
            if (!datawall || datawall.length <= 0) {
                var articleContent = document.querySelectorAll("#lrb-articleCopy .article-content");
                if (articleContent && articleContent.length > 0) {
                    //var subxStart = document.getElementsByTagName("subxtechbodyend");
                    var subxStart = document.getElementsByClassName("article-content");
                    //var subxStart = document.querySelectorAll("#js-articleEnd");
                    if (subxStart && subxStart.length > 0)
                        subxStart[0].insertAdjacentHTML('afterbegin', data.response.Message);
                    else
                        window.ZITUtils.writeDebug("no subxtechbody detected from customizeMasking ");
                    if (sheet.innerHTML != "") {
                        document.body.appendChild(sheet);
                        window.ZITUtils.writeDebug("custom css also added " + sheet.innerHTML);
                    }
                    else
                        window.ZITUtils.writeDebug("empty custom css ");
                }
                else
                    window.ZITUtils.writeDebug("no article content detected ");
            }
            else
                window.ZITUtils.writeDebug("block already exists ");
        }
        else {
            var subxStart = document.getElementsByTagName("article");
            if (subxStart && subxStart.length > 0) {
                subxStart[0].insertAdjacentHTML('afterbegin', data.response.Message);
                if (sheet.innerHTML != "") {
                    document.body.appendChild(sheet);
                    window.ZITUtils.writeDebug("custom css also added " + sheet.innerHTML);
                }
                else
                    window.ZITUtils.writeDebug("empty custom css ");
            }
            else
                window.ZITUtils.writeDebug("no subxtechbody detected from customizeMasking full ");
        }
        //window.utils.scrollTo($('#lrb-articleCopy'), 100, 800);
    }
};;window.SubxSetting = JSON.parse('{"brandId":1066,"MaxHours":-1,"MaxMinutes":-61,"Weeks":0,"IsActivateXAlternate":false,"IsActivateX":false,"AnimateTypeId":0,"ActivateXsecondClickMaxHours":-1,"ActivateXsecondClickMaxMinutes":-1,"ActivateXsecondClickMaxWeeks":0,"ActivateXthirdClickMaxHours":-1,"ActivateXthirdClickMaxMinutes":-1,"ActivateXthirdClickMaxWeeks":0,"PreHtmlCode":"","WidgetDomain":"staging.lrb.co.uk","isPath":false,"EmailCanvasSuccessTextFontSize":"","EmailCanvasSuccessTextFontFamily":"","EmailCanvasSuccessTextFontWeight":"","EmailCanvasSuccessTextFontStyle":"","EmailCanvasSuccessTextLineSpace":"","EmailCanvasSuccessTextLetterSpace":"","SubscriberId":"","EmailId":"","Subscribertag":"","Emailtag":"","MemberTag":"","RegisterTag":"","DLSubscribertag":"","DLEmailtag":"","DLMemberTag":"","DLRegisterTag":"","LSSubscribertag":"","LSEmailtag":"","LSMemberTag":"","LSRegisterTag":"","CanvasAlertMessage1FontFamily":"","CanvasAlertMessage1FontWeight":"","CanvasAlertMessage1FontStyle":"","CanvasAlertMessage1FontSize":"","CanvasAlertMessage1LineSpace":"","CanvasAlertMessage1LetterSpace":"","CanvasAlertMessage2FontFamily":"","CanvasAlertMessage2FontWeight":"","CanvasAlertMessage2FontStyle":"","CanvasAlertMessage2FontSize":"","CanvasAlertMessage2LineSpace":"","CanvasAlertMessage2LetterSpace":"","IsAddGoogleFontCSS":false,"AudiencePercentage":100,"OfferPercentage":0,"ApiKey":"d@tkcs@l","BrandDomain":"lrb","PaymentPercentage":100,"CategoryUrlNo":2,"GroupEnabled":0,"SessionLimitEnabled":0,"GAAccount":"","GTMTag":"G-7LCPFB8KQ6","datawallEnabled":1,"isHideOnSubmitSlideCanvas":false,"HideOnSubmitSlideCanvasMaxMinutes":-1,"HideOnSubmitSlideCanvasMaxHours":-1,"HideOnSubmitSlideCanvasMaxWeeks":0,"HideCanvasTypeForRegisters":0,"HideCanvasTypeForMembers":0,"isHideOnSubmitPopupCanvas":false,"HideOnSubmitPopupCanvasMaxMinutes":-1,"HideOnSubmitPopupCanvasMaxHours":-1,"HideOnSubmitPopupCanvasMaxWeeks":0,"isReCaptchaOn":false,"isHideAllEmailCanvas":0,"reCaptchaSiteKey":"","reCaptchaSecretKey":"","PanelPercentage":-1,"MemberSignedInWidget":0,"fromCache":0,"CacheKey":null,"widgetDataLayer":"content_type,,is_first_twitter,,o_pw,,refer,,referrer,author;has_article_access,,content_type,,content_type;has_inst_access;inst_name,,content_type;logged_in;has_personal_sub;s_pw,,content_type;s_pw;logged_in;donottrack,,content_type;s_pw;logged_in;donottrack;has_personal_sub;has_inst_access,,content_type;s_pw;logged_in;has_article_access;specialSec,,content_type;s_pw;logged_in;is_first_twitter,,content_type;s_pw;logged_in;o_pw;specialSec;donottrack,,content_type;s_pw;logged_in;specialSec,,content_type;s_pw;o_pw;logged_in;has_personal_sub;donottrack,,content_type;s_pw;o_pw;logged_in;specialSec;donottrack,,has_article_access,,has_article_access;author,,has_article_access;a_pw,,has_article_access;tags,,has_personal_sub;has_inst_access;content_type,,refer;content_type;is_first_twitter,,specialSec,,s_pw,,s_pw;o_pw;specialSec,","widgetLocalStorage":"","CacheDate":"2025-08-21T15:31:19.7557694Z","allowedTypes":[{"CT":"post","AT":"popup"},{"CT":"display","AT":"none"},{"CT":"get","AT":"popup"},{"CT":"post","AT":"slide"},{"CT":"get","AT":"none"},{"CT":"get","AT":"slide"}],"CKSubscribertag":"","CKEmailtag":"","CKMemberTag":"","CKRegisterTag":"","ckIdentity":"","lsIdentity":"","qsIdentity":"","DLIdentity":"","BrandUrl":"https://emaillead.zeddit.com"}');window.SubxSettings = null;(function(n,t){var u,rt,d,g,nt,y,r,o,tt,it,p,w,b;!function(n){function h(){}function c(n,t){return function(){n.apply(t,arguments)}}function t(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];o(n,this)}function e(n,t){for(;3===n._state;)n=n._value;return 0===n._state?void n._deferreds.push(t):(n._handled=!0,void f(function(){var u=1===n._state?t.onFulfilled:t.onRejected,f;if(null===u)return void(1===n._state?r:i)(t.promise,n._value);try{f=u(n._value)}catch(e){return void i(t.promise,e)}r(t.promise,f)}))}function r(n,r){try{if(r===n)throw new TypeError("A promise cannot be resolved with itself.");if(r&&("object"==typeof r||"function"==typeof r)){var f=r.then;if(r instanceof t)return n._state=3,n._value=r,void u(n);if("function"==typeof f)return void o(c(f,r),n)}n._state=1;n._value=r;u(n)}catch(e){i(n,e)}}function i(n,t){n._state=2;n._value=t;u(n)}function u(n){2===n._state&&0===n._deferreds.length&&f(function(){n._handled||s(n._value)});for(var t=0,i=n._deferreds.length;i>t;t++)e(n,n._deferreds[t]);n._deferreds=null}function l(n,t,i){this.onFulfilled="function"==typeof n?n:null;this.onRejected="function"==typeof t?t:null;this.promise=i}function o(n,t){var u=!1;try{n(function(n){u||(u=!0,r(t,n))},function(n){u||(u=!0,i(t,n))})}catch(f){if(u)return;u=!0;i(t,f)}}var a=setTimeout,f="function"==typeof setImmediate&&setImmediate||function(n){a(n,0)},s=function(n){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",n)};t.prototype["catch"]=function(n){return this.then(null,n)};t.prototype.then=function(n,t){var i=new this.constructor(h);return e(this,new l(n,t,i)),i};t.all=function(n){var i=Array.prototype.slice.call(n);return new t(function(n,t){function u(r,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var o=e.then;if("function"==typeof o)return void o.call(e,function(n){u(r,n)},t)}i[r]=e;0==--f&&n(i)}catch(s){t(s)}}if(0===i.length)return n([]);for(var f=i.length,r=0;r<i.length;r++)u(r,i[r])})};t.resolve=function(n){return n&&"object"==typeof n&&n.constructor===t?n:new t(function(t){t(n)})};t.reject=function(n){return new t(function(t,i){i(n)})};t.race=function(n){return new t(function(t,i){for(var r=0,u=n.length;u>r;r++)n[r].then(t,i)})};t._setImmediateFn=function(n){f=n};t._setUnhandledRejectionFn=function(n){s=n};"undefined"!=typeof module&&module.exports?module.exports=t:n.Promise||(n.Promise=t)}(n);String.prototype.replaceAll=function(n,t){var i=this;return i.replace(n,t)};String.prototype.startsWith=function(n){return n==null||n==""||this.length==0||n.length>this.length?!1:this.substr(0,n.length)==n?!0:!1};var f={},v=[],et=document.body,h=function(i,r,u,f){var l,h,o,e,a,s,c;if(i=i||"",r=r||{},u=u||"",f=f||function(){},i==""){n.ZITUtils.writeDebug("Url is empty.");return}if(l=function(n){var t=[];for(var i in n)n.hasOwnProperty(i)&&t.push(i);return t},typeof r=="object"){for(h="",o=l(r),e=0;e<o.length;e++)h+=encodeURIComponent(o[e])+"="+encodeURIComponent(r[o[e]]),e!=o.length-1&&(h+="&");i+="?"+h}else typeof r=="function"&&(u=r,f=u);typeof u=="function"&&(f=u,u="callback");Date.now||(Date.now=function(){return(new Date).getTime()});a=Date.now();s="jsonp"+Math.round(a+Math.random()*1000001);n[s]=function(i){f(i);try{delete n[s]}catch(r){n[s]=t}};i=i.indexOf("?")===-1?i+"?":i+"&";c=document.createElement("script");c.setAttribute("src",i+u+"="+s);document.getElementsByTagName("head")[0].appendChild(c)};n.JSONP=h;n.SubxMode=u;u={isLocal:!1,version:"3.8.10",isTest:!1,getWidgetApiUrl:function(t){return"https://"+this.getBrandDomain(t)+".zeddit.com/"+n.location.hostname+"/GetCustomWidgetV2"},getBootstrapeScriptUrl:function(){return this.getBootstrapeNewPanelScriptUrl()},getBootstrapeNewPanelScriptUrl:function(){return n.SubxClientEvents.scriptGroup=="HearstUS"?"https://d2ip7iv1l4ergv.cloudfront.net/embed/widget/ZITBootstrap-newpanel-3.0.js?v=3.8.9":this.isLocal?localbaseurl+"/Scripts/embed/widget/ZITBootstrap-newpanel-1.0.js?v="+(new Date).getTime():"https://d2ip7iv1l4ergv.cloudfront.net/embed/widget/ZITBootstrap-newpanel-2.0.js?v="+this.version},getMyloScriptUrl:function(){return"https://cdn.mylo.id/mylo-sdk-javascript/1.6.0/mylo.min.js"},getJqueryScript:function(){if(typeof jQuery!="undefined")if(jQuery.fn.jquery.startsWith("1.1"))n.ZITUtils.writeDebug("Outdated jquery detected. Going to load new jQuery.");else return n.ZITUtils.writeDebug("jQuery has already been loaded "+jQuery.fn.jquery),"";else n.ZITUtils.writeDebug("Going to load jQuery");return n.ZITFunctions.host()=="wwwtimetesting.cdsglobal.co.uk"||n.ZITFunctions.host()=="www.subscription.co.uk"?"":this.isLocal?"/Scripts/jquery.3.5.min.js":"https://d2ip7iv1l4ergv.cloudfront.net/embed/widget/jquery.3.6.min.js"},getFormValidationScript:function(){return n.ZITUtils.writeDebug("Going to load Form validator"),n.ZITFunctions.host()=="wwwtimetesting.cdsglobal.co.uk"||n.ZITFunctions.host()=="www.subscription.co.uk"?"":"//cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.1/jquery.validate.min.js"},getCryptoScript:function(){return"https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.min.js"},getJqueryIdletimerScript:function(){return"//cdnjs.cloudflare.com/ajax/libs/jquery-idletimer/1.0.0/idle-timer.min.js"},getNewCanvasScript:function(){return this.isLocal?"/Scripts/embed/widget/ZITNewCanvas.js?v="+(new Date).getTime():"https://d2ip7iv1l4ergv.cloudfront.net/embed/widget/ZITNewCanvas.js?v="+this.version},getNewCanvasPostScript:function(){return this.isLocal?"/Scripts/embed/widget/ZITNewCanvasPost.js?v="+(new Date).getTime():"https://d2ip7iv1l4ergv.cloudfront.net/embed/widget/ZITNewCanvasPost.js?v="+this.version},getRecaptchaAPIScript:function(t){return n.SubxClientEvents&&n.SubxClientEvents.recapV3&&n.SubxClientEvents.recapV3==1?"https://www.google.com/recaptcha/api.js?render="+t:"https://www.google.com/recaptcha/enterprise.js?render="+t},getAuth0Script:function(){return"https://cdn.auth0.com/js/auth0/9.18/auth0.min.js"},getDataTrackingScript:function(){return u.getDataTrackingDomain()+"SetCampaignViewWithData"},getDataTrackingDomain:function(){return typeof n.SubxClientEvents.region!="undefined"&&n.SubxClientEvents.region=="US"?"https://dataus.zeddit.com/":"https://datatracking.zeddit.com/"},getBrandDomain:function(){var t=n.location.host;if(typeof n.SubxClientEvents!="undefined"&&typeof n.SubxClientEvents.scriptGroup!="undefined"&&n.SubxClientEvents.scriptGroup!=""){if(n.SubxClientEvents.scriptGroup=="VoxUS")return"coreus";if(n.SubxClientEvents.scriptGroup=="HearstUK")return"produk";if(typeof n.SubxClientEvents!="undefined"&&typeof n.SubxClientEvents.scriptDomain!="undefined"&&n.SubxClientEvents.scriptDomain!="")return n.SubxClientEvents.scriptDomain.toLowerCase()}else return"gatewall"},getAccessCanvas:function(t,i,r){if(r>0)return"https://"+this.getBrandDomain(t)+".zeddit.com/"+n.location.hostname+"/GetCanvas?curSession="+n.ZITFunctions.retrieveCurSession()+"&uemail="+n.ZITUtils.readCookie("_sem")+"&canvasIdentifier="+i+"&DNT="+n.ZITFunctions.isDNT+"&host="+encodeURIComponent(n.location.href)},getSubxCore:function(t){var l=n.ZITFunctions.retrieveOrigSession(),p=n.ZITFunctions.retrieveCurSession(),a=n.ZITFunctions.retrieveTrackingData(),i="https://"+this.getBrandDomain(t)+".zeddit.com/"+n.location.hostname+"/SubxCoreV1?origId=",h,w,b,k,v,d,u,f,e,y,o,g,c,r,s;return l&&l!=""?i=i+encodeURIComponent(l):(h=n.ZITloader.getQueryString("dtId"),h&&h!=""&&(i=i+h)),i=i+"&curSession=",typeof p!="undefined"&&(i=i+p),i=i+"&pid="+t,i=i+"&vtype="+n.ZITFunctions.retrieveVisitorType(),i=i+"&sxTg="+n.ZITFunctions.retrieveTestGroup(),navigator&&(i=i+"&nvg="+navigator.maxTouchPoints),w=n.ZITUtils.readCookie("_debugRP"),i=i+"&debugRP="+w,i=i+"&urlNo="+n.ZITFunctions.categoryNo,b=n.ZITUtils.readCookie("_sanba"),i=i+"&ANba="+b,i=i+"&np="+(n.ZITFunctions.newpage==!0?1:0),k=n.ZITUtils.readCookie("_isFirst")||0,k>0&&(i=i+"&isFirst=1"),i=i+"&isArticle="+n.ViewerLoader.isArticle(),v=n.ZITUtils.readCookie("_isMemAud")||0,i=i+"&isMemAud="+v,i=i+"&DNT="+n.ZITFunctions.isDNT,i=i+"&mOnly="+(n.ViewerLoader.specialPath?1:0),n.ZITFunctions.dataLayerValue!=""&&(i+=n.ZITFunctions.dataLayerValue),d=n.ZITUtils.readCookie("_MChecked")||0,v>0?(i=i+"&sue="+n.ZITUtils.readCookie("_sue"),i=i+"&uemail="+n.ZITUtils.readCookie("_sem"),i=i+"&isMber=1",typeof n.ZITUtils.readCookie("_sue")!="undefined"&&d==0?i=i+"&hasChecked=0":typeof n.ZITUtils.readCookie("_sue")!="undefined"?(i=i+"&hasChecked=1",n.ZITUtils.writeDebug(" Membership has been checked today ")):typeof n.SubxClientEvents.retrieveRegMember!="undefined"?n.ZITUtils.createCookie("_isMemAud","",-1):n.ZITUtils.writeDebug(" Customized membership by pass daily check.")):(u=n.ZITUtils.readCookie("_sue"),u&&u!=""||(i=i+"&sue="+encodeURIComponent(u)),u=n.ZITloader.getQueryString("sue")),n.ZITUtils.writeDebug("email retrieved "+n.subxEmail),n.subxEmail&&n.subxEmail!=""&&(i=i+"&emailId="+encodeURIComponent(n.subxEmail)),n.ZITUtils.localStorageStore("zit.pass")!=null&&n.ZITUtils.localStorageStore("zit.pass")!=""&&a.isEmailAud==0&&(i=i+"&pass="+n.ZITUtils.localStorageStore("zit.pass")),i=i+"&mlFile="+a.ML,f=n.ZITUtils.readCookie("_doffer")||0,(typeof f=="undefined"||f==null)&&(f=-1),i=i+"&doffer="+f,n.ZITFunctions.updateSPWCookie(),typeof n.SubxClientEvents.retrieveHistoryspw!="undefined"?i=i+n.SubxClientEvents.retrieveHistoryspw(a.isEmailAud):(e=n.ZITUtils.readCookie(n.ZITFunctions.spwCookieName),n.ZITUtils.writeDebug(n.ZITFunctions.spwCookieName+" "+e),e&&e!=""&&n.ZITFunctions.spwCookieName!="_smpw"?i=i+"&spw="+e:(y=n.ZITUtils.readCookie("_srpw"),i=y?i+"&spw="+y:i+"&spw=0")),typeof n.SubxClientEvents.isSpecialSection!="undefined"&&n.SubxClientEvents.isSpecialSection()&&(i=i+"&isSpecialSec=1"),o=n.ZITUtils.readCookie("_sxo"),g=n.ZITFunctions.host(),typeof o!="undefined"&&o!=""&&o!=null&&(i=i+"&sxo="+btoa(o)),typeof n.SubxClientEvents.addtoQuery!="undefined"&&(i=i+n.SubxClientEvents.addtoQuery()),c=n.ZITFunctions.keyword,c&&c!=""&&(i+="&keyword="+encodeURIComponent(c)),r=n.ZITUtils.readCookie("_sxoSource"),r!=null&&r!=""&r!=null?r!="Organic"&&(i+="&docrefer="+encodeURIComponent(r)):document.referrer&&document.referrer!=""&&(i+="&docrefer="+encodeURIComponent(document.referrer)),n.ZITFunctions.isDNT==0&&(s=n.ZITUtils.localStorageStore("_scrH")||"",typeof s!="undefined"&&s!=""&&s!=null&&(i=i+"&scrH="+n.ZITUtils.jsencrypt(g,s),n.ZITUtils.localStorageStore("_scrH",null))),i=i+"&refer="+encodeURIComponent(n.location.href),n.SubxCoreUrl=i,i}};n.ViewerLoader={toRemoveSpw:0,username:"",htmlCode:"",isFirstRegWall:-1,accessFinished:!1,specialPath:!1,remainingArticle:-1,accessresult:-1,HideNormalOnFirstRegWall:0,HideNormalOnRegWall:0,HideEmailAud:0,MemberEnabled:0,isRegister:0,totalWaitingTime:0,isArticle:function(){return n.SubxClientEvents.isArticle()?1:0},customizedint:function(t,i,r){var l=this,s=n.SubxClientEvents.getContainer(),c=n.SubxClientEvents.getAnimateContainer(),a=n.ZITUtils.readCookie("_isMemAud")||0,f=n.ZITFunctions.retrieveTrackingData(),e,v,y,p,o,w;n.ZITUtils.writeDebug("Calling customizedint");a==1?(n.ZITUtils.writeDebug("Membership Mode"),o='<div class="zeddit-rcm" data-pid="'+n.ZITFunctions.brandId+'" data-type="canvas-disclaimer" animation-type="none" data-issignin="1" data-ism="1"><\/div>',e=s==null?c:s[0],e?e.insertAdjacentHTML("beforebegin",o):n.ZITUtils.writeDebug("Non subxbody"),n.ViewerLoader.isFirstRegWall=0,n.ViewerLoader.accessFinished=!0,f.ToBlock=0,n.ZITFunctions.saveTrackingDataToSxo(f)):(l.isRegister==1||f.isRegAud==1)&&l.MemberEnabled==0?(n.ZITUtils.writeDebug("Register Mode"),o='<div class="zeddit-rcm" data-pid="'+n.ZITFunctions.brandId+'" data-type="canvas-disclaimer" animation-type="none" data-issignin="1"><\/div>',e=s==null?c:s[0],e?e.insertAdjacentHTML("beforebegin",o):n.ZITUtils.writeDebug("Non subxbody"),n.ZITUtils.writeDebug("Register Hide Mode"),n.ViewerLoader.isFirstRegWall=0,n.ViewerLoader.accessFinished=!0,f.ToBlock=0,n.ZITFunctions.saveTrackingDataToSxo(f)):f.isEmailAud==1&&n.ViewerLoader.HideEmailAud==1&&l.MemberEnabled==0?(n.ZITUtils.writeDebug("Email Aud Hide Mode"),o='<div class="zeddit-rcm" data-pid="'+n.ZITFunctions.brandId+'" data-type="canvas-disclaimer" animation-type="none" data-issignin="1"><\/div>',e=s==null?c:s[0],e?e.insertAdjacentHTML("beforebegin",o):n.ZITUtils.writeDebug("Non subxbody"),n.ViewerLoader.isFirstRegWall=0,n.ViewerLoader.accessFinished=!0,f.ToBlock=0,n.ZITFunctions.saveTrackingDataToSxo(f)):a==0&&(typeof n.SubxClientEvents.customizeMasking!="undefined"||typeof n.SubxClientEvents.newcustomizeMasking!="undefined")?(f=n.ZITFunctions.retrieveTrackingData(),n.ZITFunctions.saveTrackingDataToSxo(f),n.ZITFunctions.updateSPWCookie(),v="",t>0?(f.ToBlock=1,n.ZITFunctions.saveTrackingDataToSxo(f),n.ZITUtils.writeDebug("Going to call canvas "+t),h(u.getAccessCanvas(n.ZITFunctions.brandId,i,t),function(i){var f,h,o,c,s,u,l;for(i.response.Result==1&&i.response.CurCanvas.rcmHtml!=""?(v=i.response.CurCanvas.rcmHtml,n.ZITUtils.writeDebug("Canvas html code updated.")):(n.ZITFunctions.sendRaygunData(new Error("Canvas is not received successfully "+JSON.stringify(r)),"Unable to retrieve the canvas "+t),n.ZITUtils.writeDebug("Canvas html code not retrieved.")),n.SubxExtCanvas=i.response.CachedCanvas&&i.response.CachedCanvas.length>0?i.response.CachedCanvas:null,v==""&&(r.response.CanvasStatus=0,n.ZITUtils.writeDebug("Canvas status has been updated to 0.")),r&&r.response&&r.response.CanvasStatus==0&&(r.response.AccessResult==0||r.response.AccessResult==5)?(n.ZITUtils.writeDebug("No canvas retrieved skip gatewall"),r.response.AccessResult=-10):n.ZITUtils.writeDebug("Going to process "+JSON.stringify(r.response)),r&&r.response&&(r.response.AccessResult==0||r.response.AccessResult==5)?(n.ZITUtils.writeDebug("Going to block "+r.response.AccessResult),n.ViewerLoader.isFirstRegWall=!n.ZITUtils.readCookie(n.ZITFunctions.spwCookieName)&&n.ViewerLoader.HideNormalOnFirstRegWall&&n.ViewerLoader.HideNormalOnFirstRegWall==1?1:0,typeof n.SubxClientEvents.newcustomizeMasking!="undefined"?n.SubxClientEvents.newcustomizeMasking(r):n.SubxClientEvents.customizeMasking(r),n.ZITFunctions.sendGAData(0,"BlurContent",0,"Registration",!0)):(n.ZITUtils.writeDebug("Do not block "),n.SubxClientEvents.unblockContent(),n.ViewerLoader.remainingArticle=r.response.RA,r.response.AccessResult==1&&n.ZITFunctions?(n.ZITFunctions.updateReaderCounter(r.response.RA),f=n.ZITUtils.readCookie("_sxcc"),f&&f!=""||(h=new Date,n.ZITUtils.createCookieinDetails("_sxcc",h.toLocaleString(),30,0,0,0))):r.response.AccessResult!=-10&&n.ZITFunctions.updateReaderCounter(r.response.RA),r.response.AccessResult>1&&(o=r.response.SignedInMessage,c=n.ZITUtils.readCookie("_siM")||0,r.response.AccessResult==3&&(o+=r.response.Message),(c==0||r.response.AccessResult!=2)&&e.insertAdjacentHTML("beforebegin",o),r.response.Username&&n.ZITFunctions.setUserName(r.response.Username),n.ZITUtils.createCookie(n.ZITFunctions.spwCookieName,"",-1),n.ZITUtils.createCookie("_doffer","",-1)),n.ZITUtils.writeDebug("Keep original format"),n.ViewerLoader.isFirstRegWall=0),s=document.querySelectorAll(".zeddit-rcm.is-cg"),u=0,l=s.length;u<l;u++)n.ViewerLoader.initDynamicWidget(s[u],i.response);n.ViewerLoader.accessFinished=!0})):(f.ToBlock=0,n.ZITFunctions.saveTrackingDataToSxo(f),n.ZITUtils.writeDebug("Skip calling url "+t),n.ViewerLoader.remainingArticle=r.response.RA,r.response.AccessResult==1&&n.ZITFunctions?(n.ZITFunctions.updateReaderCounter(r.response.RA),y=n.ZITUtils.readCookie("_sxcc"),y&&y!=""||(p=new Date,n.ZITUtils.createCookieinDetails("_sxcc",p.toLocaleString(),30,0,0,0))):r.response.AccessResult!=-10&&n.ZITFunctions.updateReaderCounter(r.response.RA),r.response.AccessResult>1&&(o=r.response.SignedInMessage,w=n.ZITUtils.readCookie("_siM")||0,r.response.AccessResult==3&&(o+=r.response.Message),(w==0||r.response.AccessResult!=2)&&e.insertAdjacentHTML("beforebegin",o),r.response.Username&&n.ZITFunctions.setUserName(r.response.Username),n.ZITUtils.createCookie(n.ZITFunctions.spwCookieName,"",-1),n.ZITUtils.createCookie("_doffer","",-1)),n.ZITUtils.writeDebug("Keep original format"),n.ViewerLoader.isFirstRegWall=0,n.ViewerLoader.accessFinished=!0)):(n.ZITUtils.writeDebug("filter out mode "+a+" "+s+" "+c),n.ZITFunctions.setFilterOut(1),n.ZITUtils.writeDebug("Non-Developer"),n.ViewerLoader.isFirstRegWall=0,n.ViewerLoader.accessFinished=!0,f=n.ZITFunctions.retrieveTrackingData(),f.ToBlock=0,n.ZITFunctions.saveTrackingDataToSxo(f))},initDynamicWidget:function(t,i){t.setAttribute("data-src",location.href);var r=n.ZITFunctions.retrieveTrackingData(),o=n.ZITFunctions.retrieveOrigSession(),s=n.ZITFunctions.retrieveCurSession(),h=n.ZITFunctions.brandId,u={key:0,pid:t.getAttribute("data-pid")||0,isContentGate:t.getAttribute("data-iscg")||0,isMembership:t.getAttribute("data-ism")||0,isSignIn:t.getAttribute("data-issignin")||0,remaining:t.getAttribute("data-ra")||0,wid:t.getAttribute("data-wid")||0,isnew:t.getAttribute("data-isnew")||0,displays:t.getAttribute("data-displays")||0,defaultPageSize:t.getAttribute("data-no-post")||4,isLocal:t.getAttribute("data-local")||0,widgetType:t.getAttribute("data-type")||"",animationType:t.getAttribute("animation-type")||"",variant:t.getAttribute("variant")||0,funnelType:t.getAttribute("funnel-type")||"",isDisplayWidget:!1,isNewCanvas:!0,brandUrl:"",widgetDisplayType:"",timeToFlash:5e3,timeToRemove:8e3,timeToDisplay:3e3,apiURL:"",layout:1,filterType:"",filterValue:"",noOfPostVisibleInCarousel:0,showThumbnail:!0,autoPlay:!1,closeType:3,appearAtScrollPosition:50,initSession:o,curSession:s,origId:o,emailpanelobject:"",isPreview:!1,isSandbox:!1,isOptOut:!1,hasFullName:!1,isDisclaimerShowFromStart:!1,apiKey:n.ZITFunctions.apiKey,isShowTab:!1,isSlide:!1,isAnimate:!1,popupShowOn:0,popupShowOnMobile:0,popupAppearAtScrollPosition:50,popupAppearAtScrollPositionMobile:50,scrollStatus:0,deviceForScrollStatus:0,slideShowOn:0,slideTimerTime:0,animateFrequency:0,popupDelayTime:0,popupDelayTimeMobile:0,doNotTrack:e,isR:r.R,pv:r.sP,dP:r.dP,dS:r.dS,tS:r.tS,tP:r.tP,cPs:r.cPs,lPs:r.lPs,lVd:r.lVd,F:r.F||0,Nba:r.Nba,dT:r.devT,isEmailAud:r.isEmailAud||0,isPanelAud:r.isPanelAud||0,isDropoff:r.isDropoff||0,isRegAud:r.isRegAud||0,userName:r.userName,emailId:r.emailId,emailTag:r.emailTag,subscribeTag:r.subTag,groupName:r.groupName||"",w:0,isActivateX:!1,isActivateXAlternate:!1,activateX_AnimType:0,activateX_MaxMinutes:0,activateX_SecondClick_MaxMinutes:0,activateX_ThirdClick_MaxMinutes:0,isTest:!1,isSlideScrollUpHide:!1,isHideOnSubmitSlideCanvas:!1,hideOnSubmitSlideCanvas_MaxMinutes:0,isHideOnSubmitPopupCanvas:!1,hideOnSubmitPopupCanvas_MaxMinutes:0,canvasType:"",isReCaptchaOn:r.isReCaptchaOn,reCaptchaSiteKey:n.ZITUtils.decrypt(r.reCaptchaSiteKey),reCaptchaSecretKey:n.ZITUtils.decrypt(r.reCaptchaSecretKey)};u.pid=="xxx"&&(u.pid=1065);var f=u.isSignIn==1?i.SignInCanvas:i.CurCanvas;u.doNotTrack=f.DoNotTrack;u.wid==0&&(u.wid=f.widgetId);t.setAttribute("data-brandurl",f.brandUrl);h==988&&u.isSignIn==1&&n.ZITUtils.createCookieinDetails("_siM",1,365,0,0,0);t.setAttribute("data-origId",o);n.ZITloader.initDataWallCanvas(t,u,f)}};n.ZITloader={getAPIURL:function(t){var rt=[],ut=[],ft=[],et=[],ot=[],st=[],ht=[],ct=[],lt=[],at=[],vt=s,yt=f.WidgetOtherContainerConfig,y,o,p,pt,w,wt,bt,kt,i,dt,g,nt,gt,b,ni,ti,e,c,tt,ii,k,ri,it,d,ui,a;t&&(vt=l,yt=f.WidgetPopupContainerConfig);var h=n.ZITFunctions.testData,v=!1,r=n.ZITFunctions.retrieveTrackingData();for(y=0;y<vt;y++)o=yt[y],ut.push(o.widgetType),et.push(o.animationType),ot.push(o.isContentGate),st.push(o.isMembership),ht.push(o.isSignIn),at.push(o.variant),p=0,h&&h.testAnamiation==o.animationType&&h.testCanvasType==o.widgetType&&h.testContentG==0&&(h.testCanvasType=="canvas-display"&&h.testVariant==o.variant?(o.wid<=0&&(o.wid=h.testWidget),p=1,v=!0):h.testCanvasType!="canvas-display"&&(o.wid<=0&&(o.wid=h.testWidget),p=1,v=!0)),rt.push(o.wid),ct.push(p),pt="zit."+o.animationType+"."+r.isPanelAud+".displaysD",w=n.ZITUtils.readCookie(pt),w||(w="0"),wt=parseInt(w),ft.push(wt),bt="zit."+o.widgetType+"."+o.animationType+"."+o.isContentGate,kt=n.ZITUtils.readCookie(bt)||0,lt.push(kt);return h&&!v?(n.ZITUtils.writeDebug("Test data not found"),n.ZITUtils.writeDebug(JSON.stringify(h))):h||n.ZITUtils.writeDebug("No test data"),i=u.getWidgetApiUrl(n.ZITFunctions.brandId),i=i+"?p_id="+n.ZITFunctions.brandId,v&&(i=i+"&idg="+ct.join(",")),i=i+"&wid="+rt.join(","),i=i+"&type="+ut.join(","),dt=n.ZITUtils.readCookie("__adblocker"),i=i+"&adBlk="+dt,i=i+"&display="+ft.join(","),i=i+"&animation_type="+et.join(","),i=i+"&cL="+lt.join(","),i=i+"&isContentGate="+ot.join(","),g=n.ZITUtils.readCookie("_cath")||"",g!=""&&(i=i+"&cath="+g),nt=n.ZITUtils.readCookie("_cfreqh")||"",nt!=""&&(i=i+"&caFreq="+nt),i=i+"&isMber="+st.join(","),i=i+"&isSignIn="+ht.join(","),i=i+"&variant="+at.join(","),r.groupName!=""&&(i=i+"&sxTg="+r.groupName),typeof r.last_wid!="undefined"&&r.last_wid>0&&(i=i+"&lastWid="+r.last_wid),i=i+"&clickedId=0&iss="+n.ZITFunctions.retrieveCurSession()+"&dtId="+encodeURIComponent(n.ZITFunctions.retrieveOrigSession()),gt=n.ZITUtils.readCookie("_doffer")||0,i=i+"&doffer="+gt,i=i+"&sfreq="+r.SFreq,i=i+"&isreload="+!n.ZITFunctions.newpage,b=n.ZITUtils.readCookie("zit.all.0")||0,b&&b>0&&(i=i+"&allcL="+b),ni=n.ZITUtils.readCookie("_isMemAud")||0,ni>0&&(i=i+"&isMemAud=1"),ti=n.ZITUtils.readCookie("_sxMD")||0,i=i+"&sxmd="+ti,i=i+"&nba="+r.Nba,e="",typeof n.SubxClientEvents.isSpecialSection!="undefined"&&n.SubxClientEvents.isSpecialSection()?(e=e+"&pm="+r.sM2,e=e+"&dm="+r.dM2,e=e+"&tm="+r.tM2):n.SubxClientEvents&&typeof n.SubxClientEvents.GetReadingCounter!="undefined"?e=e+n.SubxClientEvents.GetReadingCounter():(c=n.ZITUtils.readCookie("_rA"),tt=n.ZITUtils.readCookie("_spw"),tt&&tt>0&&c&&c>0?(e=e+"&pm="+(parseInt(c)-1),e=e+"&dm="+(parseInt(c)-1),e=e+"&tm=0"):(e=e+"&pm="+r.sM,e=e+"&dm="+r.dM,e=e+"&tm="+r.tM)),n.ZITUtils.writeDebug("apiPage Retrieved"+e+" "+(r.tM+r.dM)+" "+c),e&&(i=i+e),i=i+"&DNT="+n.ZITFunctions.isDNT,typeof n.SubxClientEvents.addtoQuery!="undefined"&&(i=i+n.SubxClientEvents.addtoQuery()),ii="zit.npwcc",k=n.ZITFunctions.sessionStore(ii),typeof k!="undefined"&&k!=null&&(i=i+"&exl="+k.replace("null,","")),ri=n.ZITloader.getSubxtLimitDCookies(),i=i+"&sLHis="+encodeURIComponent(JSON.stringify(ri)),n.ZITFunctions.isDNT==0&&(i=i+"&pv="+r.sP,i=i+"&sSr="+r.sSr,i=i+"&wHis="+r.tWids,i=i+"&wN="+r.wN,i=i+"&tPrice="+r.TPrice,i=i+"&tP="+r.tP+"&dp="+r.dP+"&isreturn="+r.R,it="",it=Array.isArray(r.lPs)?r.lPs.join(","):r.lPs,i=i+"&dS="+r.dS+"&cPs="+r.cPs+"&freq="+r.F+"&lPs="+it+"&lVd="+r.lVd),i=i+"&apiKey="+n.ZITFunctions.apiKey+"&isEmailAud="+r.isEmailAud+"&isPanelAud="+r.isPanelAud+"&isRegAud="+r.isRegAud+"&isDropoff="+r.isDropoff,i=typeof r.devT!="undefined"&&r.devT!=4?i+"&dT="+r.devT:i+"&dT=4",d=n.ZITFunctions.keyword,d&&d!=""&&(i+="&keyword="+encodeURIComponent(d)),ui=n.ZITUtils.readCookie("_sxRD")||0,i=i+"&sxrd="+ui,n.ZITFunctions.localStorageValue!=""&&(i+=n.ZITFunctions.localStorageValue),typeof n.SubxClientEvents.gtmstatus!="undefined"&&(i=i+"&gtm="+n.SubxClientEvents.gtmstatus),n.SubxEmailList&&n.SubxEmailList!=null&&(i=i+"&emailLists="+encodeURIComponent(JSON.stringify(n.SubxEmailList))),a=n.ZITUtils.localStorageStore("_sxNL"),a&&a!=null&&a!=""&&(i=i+"&anonyemailLists="+encodeURIComponent(JSON.stringify(a))),n.ZITFunctions.dataLayerValue!=""&&(i+=n.ZITFunctions.dataLayerValue),i=i+"&host="+encodeURIComponent(n.location.href),o.apiURL=i,i},initScript:function(n){if(Array.isArray(n)){var i=this,t=[];return n.forEach(function(n){t.push(i.script(n))}),Promise.all(t)}return new Promise(function(t,i){var f=!1,e=document.getElementsByTagName("script")[0],r=document.createElement("script"),o=!1,u,s;if(v.length!=0)for(u=0,s=v.length;u<s;u++)n==v[u]&&(t(this),o=!0);o||(v.push(n),r.type="text/javascript",r.src=n,r.async=!0,r.onload=r.onreadystatechange=function(){f||this.readyState&&this.readyState!="complete"||(f=!0,t(this))},r.onerror=r.onabort=i,e.parentNode.insertBefore(r,e))})},setNptTechAdblockerCookie:function(t){n.ZITUtils.createCookieinDetails("__adblocker",t,0,5,0,0)},checkAdBlock:function(){n.ZITUtils.writeDebug("Check Ads Block.");var t=document.createElement("script");t.setAttribute("async",!0);t.setAttribute("src","//www.npttech.com/advertising.js");t.setAttribute("onerror","window.ZITloader.setNptTechAdblockerCookie(true);");document.getElementsByTagName("head")[0].appendChild(t)},loadDependencies:function(n){try{return n!=""?this.initScript(n):new Promise(function(n){n(this)})}catch(t){return console.error(t),new Promise(function(n){n(this)})}},initContainer:function(t,i,r){(function(u){n.LoadCanvasFormValidate&&(u.validator?(n.ZITUtils.writeDebug("validator has been loaded 1"),n.LoadCanvasFormValidate(t,i,r)):(n.ZITUtils.writeDebug("validator has not been loaded, wait for 3 seconds 1"),setTimeout(n.LoadCanvasFormValidate(t,i,r),3e3)))})(jQuery)},getQueryString:function(t,i){i||(i=n.location.href);t=t.replace(/[\[\]]/g,"\\$&");var u=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),r=u.exec(i);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null},htmlDecode:function(n){try{var t=String(n);return t=t.replaceAll(/&quot;/g,'"'),t=t.replaceAll(/&#39;/g,"'"),t=t.replaceAll(/&lt;/g,"<"),t=t.replaceAll(/&gt;/g,">"),t.replaceAll(/&amp;/g,"&")}catch(i){}return n},getSubxtLimitDCookies:function(){var t=document.cookie.split(";"),n=[];return t.forEach(function(t){var u=t.split("="),i=u[0].trim(),f=decodeURIComponent(u[1]),r;i.startsWith("slimitD")?(r={widgetId:i.replace("slimitD.",""),targetProfileId:0,display:f},n.push(r)):i.startsWith("stlimitD")&&(r={widgetId:0,targetProfileId:i.replace("stlimitD.",""),display:f},n.push(r))}),n},DisplayWidget:function(t,i,r,o){var c,v,ht,d,y,ft,g,nt,tt,it,p,h,a;if(r==null){n.ZITUtils.writeDebug("Malfunctioned/Empty json String.");o.animationType=="popup"&&n.ZITFunctions.SubxLimitSlide&&(n.ZITFunctions.SubxPopupClosed++,n.ZITUtils.writeDebug("Popup canvas closed by Malfunction."));n.ZITFunctions.setCanvas(0);return}var rt=i%10,w=n.ZITFunctions.brandId,et=n.ZITFunctions.retrieveOrigSession(),b=n.ZITFunctions.retrieveCurSession();t.setAttribute("data-src",location.href);var ct=r.css||"",s=n.ZITFunctions.retrieveTrackingData(),k=997,vt=n.ZITUtils.readCookie(n.ZITFunctions.spwCookieName)||0;if(typeof r.isContentGate!="undefined"&&r.isContentGate==0&&(o.isContentGate=0,n.ZITUtils.writeDebug("isContentGate flag updated back to 0 "+o.wid)),r&&(r.DoNotTrack=="1"||r.DoNotTrack=="2")){if(o.isMembership==1&&o.isSignIn==0&&(k=998),r.DoNotTrack=="1")n.ZITUtils.clearCookie("Receive Exclude from WidgetInitialization"),e=!0;else if(r.DoNotTrack=="2"){n.ZITUtils.writeDebug("No widget to show for reason:"+r.Message+" "+o.widgetType+" "+o.variant);o.animationType=="popup"&&n.ZITFunctions.SubxLimitSlide&&(n.ZITFunctions.SubxPopupClosed++,n.ZITUtils.writeDebug("Popup canvas closed by DNT."));n.ZITFunctions.setCanvas(0);return}}else noWidget=!1;o.wid==0&&(o.wid=r.widgetId);o.wid!=0&&(Array.isArray(s.sWids)?(c=!1,s.sWids.forEach(function(t){t==o.wid&&(n.ZITUtils.writeDebug("Repeated widget id detected."),c=!0)}),c||(s.sWids.push(o.wid),s.wN=parseInt(s.wN)+1)):(s.sWids=[],s.sWids.push(o.wid),s.wN=1),Array.isArray(s.tWids)?(c=!1,s.tWids.forEach(function(t){t==o.wid&&(n.ZITUtils.writeDebug("Repeated widget id detected."),c=!0)}),c||s.tWids.push(o.wid)):(s.tWids=[],s.tWids.push(o.wid)),n.ZITFunctions.saveTrackingDataToSxo(s));o.animationType=="all"&&(o.animationType=r.AnimationType);o.doNotTrack=r.DoNotTrack;t.setAttribute("data-brandurl",r.brandUrl);v=r.displays;t.setAttribute("data-displays",v);w==988&&o.isSignIn==1&&n.ZITUtils.createCookieinDetails("_siM",1,365,0,0,0);o.widgetName=r.WidgetName;t.setAttribute("data-origId",et);r.isMembership&&r.isMembership==1&&(t.setAttribute("data-ism",1),t.setAttribute("data-iscg",1),o.isSignIn==0&&(k=998));o.isSignIn==0&&o.isContentGate==1&&typeof n.SubxClientEvents.triggerEvent!="undefined"&&n.SubxClientEvents.scriptGroup!="VoxUS"?(n.ZITUtils.createCookieinDetails(n.ZITFunctions.spwCookieName,o.wid,30,0,0,0),n.ZITFunctions.clearReaderCounter(),n.ZITUtils.writeDebug("DW "+o.isSignIn+" "+o.isContentGate+" "+n.ZITFunctions.spwCookieName+" "+o.wid+" "+typeof n.SubxClientEvents.triggerEvent)):n.ZITUtils.writeDebug("No spw cookie required "+n.SubxClientEvents.scriptGroup+" "+o.isContentGate);var l=parseInt(!r.duration||r.duration==""?"-1":r.duration),ut=parseInt(!r.targetProfileId||r.targetProfileId==""?"-1":r.targetProfileId),lt=parseInt(!r.maxsessions||r.maxsessions==""?"-1":r.maxsessions),ot=parseInt(!r.cL||r.cL==""?"0":r.cL),st=parseInt(!r.cLDuration||r.cLDuration==""?"0":r.cLDuration);st>0&&ot>0&&n.ZITUtils.createCookieinDetails("zit."+o.widgetType+"."+o.animationType+"."+o.isContentGate,ot,0,0,st,0);ht=parseInt(!r.allcL||r.allcL==""?"0":r.allcL);d=parseInt(!r.AllcLDuration||r.AllcLDuration==""?"0":r.AllcLDuration);d>0&&d>0&&n.ZITUtils.createCookieinDetails("zit.all."+o.isContentGate,ht,0,0,d,0);try{n.ZITUtils.writeDebug("Going to initialize Widget type normal "+l+" "+o.wid+" tp:"+ut);l>0&&o.wid>0&&(n.ZITUtils.createCookieinDetails("zit."+o.animationType+"."+o.isPanelAud+".displaysD",v,0,0,l,0),lt>0&&(y=n.ZITUtils.readCookie("zit."+o.animationType+"."+o.isPanelAud+".sessionD"),(!y||y.indexOf(b,0)<0)&&(y?n.ZITUtils.createCookieinDetails("zit."+o.animationType+"."+o.isPanelAud+".sessionD",y+","+b,0,0,l,0):n.ZITUtils.createCookieinDetails("zit."+o.animationType+"."+o.isPanelAud+".sessionD",b,0,0,l,0))),ft="slimitD."+o.wid,ut>0&&(ft="stlimitD."+ut),n.ZITUtils.createCookieinDetails(ft,v,0,0,l,0));g=document.createElement("div");g.className="js-zitWidgetWrapper";g.innerHTML=ct+n.ZITloader.htmlDecode(r.rcmHtml);t.appendChild(g);n.ZITFunctions&&(n.ZITFunctions.saveCanvasData(o,t,r),o.isContentGate==1?(o.isMembership!=1&&n.ZITFunctions.setDatawallFlag(),o.isSignIn==0&&o.animationType=="none"&&(n.ZITUtils.createCookieinDetails(n.ZITFunctions.spwCookieName,o.wid,30,0,0,0),n.ZITUtils.writeDebug(n.ZITFunctions.spwCookieName+" has been updated to "+o.wid),nt=n.ZITUtils.readCookie("_doffer"),nt&&nt!=null&&n.ZITUtils.createCookieinDetails("_doffer",nt,30,0,0,0)),n.ZITFunctions.clearReaderCounter(s)):n.ZITUtils.writeDebug("Not CG Canvas"));o.isnew&&(tt=document.createElement("div"),tt.className="js-previewSalesFunnel",tt.innerHTML='<div class="js-previewSalesFunnel-menu"><\/div>',t.appendChild(tt),it=document.createElement("div"),it.className="js-previewSalesFunnel-overlay",it.innerHTML=String.Empty,t.appendChild(it));p=document.createElement("div");p.setAttribute("id","zit-background-glass");p.setAttribute("style","position:fixed;top:0;left:0;width:100%;height:100%;z-index:9999;background:#fff;display:none !important;");p.innerHTML='<img style="position:absolute;top:50%;left:50%;margin:-12px 0 0 -12px;" src="https://i0.wp.com/cdnjs.cloudflare.com/ajax/libs/galleriffic/2.0.1/css/loader.gif?zoom=2&amp;resize=48%2C48" alt="" width="24" height="24" srcset="https://i0.wp.com/cdnjs.cloudflare.com/ajax/libs/galleriffic/2.0.1/css/loader.gif?zoom=2&amp;resize=48%2C48" src-orig="https://i0.wp.com/cdnjs.cloudflare.com/ajax/libs/galleriffic/2.0.1/css/loader.gif?resize=48%2C48" scale="2">';document.body.appendChild(p);r.rcmHtml!=""?(o.timeToFlash=r.timeToFlash,o.timeToDisplay=r.timeToDisplay,o.timeToRemove=r.timeToRemove,o.autoPlay=r.autoPlay,o.layout=r.layout,o.showThumbnail=r.showThumbnail,o.closeType=r.closeType,o.appearAtScrollPosition=r.appearAtScrollPosition,o.rcc=r.remaining,o.origId=et,o.initSession=b,o.displays=v,o.isNewCanvas=r.isNewCanvas,o.isShowTab=r.isShowTab,o.isAnimate=r.isAnimate,o.isSlide=r.isSlide,o.scrollStatus=r.scrollStatus,o.deviceForScrollStatus=r.deviceForScrollStatus,o.slideShowOn=r.slideShowOn,o.slideTimerTime=r.slideTimerTime,o.popupShowOn=r.popupShowOn,o.popupShowOnMobile=r.popupShowOnMobile,o.popupDelayTime=r.popupDelayTime,o.popupDelayTimeMobile=r.popupDelayTimeMobile,o.popupAppearAtScrollPosition=r.popupAppearAtScrollPosition,o.popupAppearAtScrollPositionMobile=r.popupAppearAtScrollPositionMobile,o.animateFrequency=r.animateFrequency,o.isActivateX=r.isActivateX,o.isActivateXAlternate=r.isActivateXAlternate,o.activateX_AnimType=r.activateX_AnimType,o.activateX_MaxMinutes=r.activateX_MaxMinutes,o.activateX_SecondClick_MaxMinutes=r.activateX_SecondClick_MaxMinutes,o.activateX_ThirdClick_MaxMinutes=r.activateX_ThirdClick_MaxMinutes,o.isTest=r.isTest,o.isSlideScrollUpHide=r.isSlideScrollUpHide,o.isHideOnSubmitSlideCanvas=r.isHideOnSubmitSlideCanvas,o.hideOnSubmitSlideCanvas_MaxMinutes=r.hideOnSubmitSlideCanvas_MaxMinutes,o.isHideOnSubmitPopupCanvas=r.isHideOnSubmitPopupCanvas,o.hideOnSubmitPopupCanvas_MaxMinutes=r.hideOnSubmitPopupCanvas_MaxMinutes,o.canvasType=r.method,o.widgetType.indexOf("canvas")>=0&&(o.isNewCanvas=!0),(o.widgetType=="canvas-panel"||o.widgetType=="canvas-email")&&(s=n.ZITFunctions.retrieveTrackingData(),s.last_wid=o.wid,s.w=o.wid,o.isReCaptchaOn=s.isReCaptchaOn,n.ZITFunctions.saveTrackingDataToSxo(s)),h=r.method,a=function(){typeof n["ZIT.WidgetCtrl"]!="undefined"?(n["ZIT.WidgetCtrl"].init(t,o),n.ZITUtils.writeDebug("Datawall Widget initialized:"+JSON.stringify(o))):setTimeout(a,250)},r.CachedCanvas&&r.CachedCanvas.length>0&&(n.SubxExtCanvas=r.CachedCanvas),h&&(h=="get"||h=="disclaimer")?n.ZITloader.loadDependencies(u.getJqueryScript()).then(function(){n.ZITloader.loadDependencies(u.getNewCanvasScript(w)).then(function(){n.ZITloader.loadDependencies(u.getBootstrapeNewPanelScriptUrl()).then(function(){n.ZITUtils.sessionStore("zit.disablepop",0);n.ZITloader.loadDependencies(u.getJqueryIdletimerScript()).then(function(){o.isReCaptchaOn?(n.SubxClientEvents.hasRecaptcha=!0,n.dispatchEvent(new CustomEvent("addRecaptcha",{})),n.ZITUtils.writeDebug("ReCaptcha is on 3"),n.ZITloader.loadDependencies(u.getRecaptchaAPIScript(o.reCaptchaSiteKey)).then(function(){setTimeout(a,250)})):(n.ZITUtils.writeDebug("ReCaptcha is Off 3"),setTimeout(a,250))})})})}):h&&(h=="post"||h=="hybrid"||h=="display"||h=="static")?n.ZITloader.loadDependencies(u.getJqueryScript()).then(function(){n.ZITloader.loadDependencies(u.getNewCanvasScript(w)).then(function(){n.ZITloader.loadDependencies(u.getFormValidationScript()).then(function(){n.ZITloader.loadDependencies(u.getCryptoScript()).then(function(){n.ZITloader.loadDependencies(u.getNewCanvasPostScript(w)).then(function(){n.ZITloader.loadDependencies(u.getBootstrapeNewPanelScriptUrl()).then(function(){n.ZITUtils.sessionStore("zit.disablepop",0);n.ZITloader.loadDependencies(u.getJqueryIdletimerScript()).then(function(){o.isReCaptchaOn?(n.SubxClientEvents.hasRecaptcha=!0,n.dispatchEvent(new CustomEvent("addRecaptcha",{})),n.ZITUtils.writeDebug("ReCaptcha is on TD "+o.isReCaptchaOn+" "+s.isReCaptchaOn),n.ZITloader.loadDependencies(u.getRecaptchaAPIScript(o.reCaptchaSiteKey)).then(function(){setTimeout(a,250)})):(n.ZITUtils.writeDebug("ReCaptcha is Off TD "+o.isReCaptchaOn+" "+s.isReCaptchaOn),setTimeout(a,250))})})})})})})}):n.ZITUtils.writeDebug("Config Issue:"+h+"#"+JSON.stringify(o))):(n.ZITUtils.writeDebug("No html code retrieved"),o.animationType=="popup"&&n.ZITFunctions.SubxLimitSlide&&(n.ZITFunctions.SubxPopupClosed++,n.ZITUtils.writeDebug("Popup canvas closed by NoHtmlCode.")),n.ZITFunctions.setCanvas(0));f.WidgetConfig&&f.WidgetConfig.length>rt?f.WidgetConfig[rt]=o:f.WidgetConfig&&(f.WidgetConfig[f.WidgetConfig.length-1]=o,n.ZITUtils.writeDebug("Config length "+f.WidgetConfig.length+"#"+rt))}catch(at){n.ZITFunctions.sendRaygunData(at,"Error in generating Canvas"+JSON.stringify(o));k!=997&&n.ZITFunctions.sendCampaignData(k,n.ZITFunctions.apiKey,o.pid,"Error in Generating Canvas ");o.animationType=="popup"&&n.ZITFunctions.SubxLimitSlide&&(n.ZITFunctions.SubxPopupClosed++,n.ZITUtils.writeDebug("Popup canvas closed by Exception."));n.ZITFunctions.setCanvas(0)}},init:function(t){var r=this,c=20,i=function(){if(n.ZITFunctions.SubxLimitSlide&&n.ZITFunctions.haspopup-n.ZITFunctions.SubxPopupClosed>0&&(a<15e3||n.ZITFunctions.SubxPopupOpened>0)){n.ZITUtils.writeDebug(" Slide on hold because of popup open "+n.ZITFunctions.SubxPopupOpened+" ("+n.ZITFunctions.SubxPopupClosed+" / "+n.ZITFunctions.haspopup+") "+a);a=a+1e3;setTimeout(i,1e3);return}n.ZITUtils.writeDebug(" Slide showing because of popup open "+n.ZITFunctions.SubxPopupOpened+" ("+n.ZITFunctions.SubxPopupClosed+" / "+n.ZITFunctions.haspopup+") "+a);h(r.getAPIURL(!1),function(t){var l,c,i,u;if(t.response!=""){var r=t.response,a=n.ZITFunctions.retrieveOrigSession(),v=n.ZITFunctions.retrieveCurSession(),o=n.ZITFunctions.retrieveTrackingData(),h=n.ZITwidgetContainers;for(l=0;l<s;l++)c=f.WidgetOtherContainerConfig[l],i={key:0,pid:0,isContentGate:0,isMembership:0,isSignIn:0,wid:0,widgetType:"",animationType:"",variant:0,funnelType:"",displays:0,remaining:0,isnew:0,defaultPageSize:4,isLocal:0,isDisplayWidget:!1,isNewCanvas:!0,brandUrl:"",widgetDisplayType:"",timeToFlash:5e3,timeToRemove:8e3,timeToDisplay:3e3,apiURL:"",layout:1,filterType:"",filterValue:"",noOfPostVisibleInCarousel:0,showThumbnail:!0,autoPlay:!1,closeType:3,appearAtScrollPosition:50,initSession:a,curSession:v,origId:a,emailpanelobject:"",isPreview:!1,isSandbox:!1,isOptOut:!1,hasFullName:!1,isDisclaimerShowFromStart:!1,apiKey:n.ZITFunctions.apiKey,isShowTab:!1,isSlide:!1,isAnimate:!1,popupShowOn:0,popupShowOnMobile:0,popupAppearAtScrollPosition:50,popupAppearAtScrollPositionMobile:50,scrollStatus:0,deviceForScrollStatus:0,slideShowOn:0,slideTimerTime:0,animateFrequency:0,popupDelayTime:0,popupDelayTimeMobile:0,doNotTrack:e,isR:o.R,pv:o.sP,dP:o.dP,dS:o.dS,tS:o.tS,tP:o.tP,cPs:o.cPs,lPs:o.lPs,lVd:o.lVd,F:o.F||0,Nba:o.Nba,dT:o.devT,isEmailAud:o.isEmailAud||0,isPanelAud:o.isPanelAud||0,isDropoff:o.isDropoff||0,isRegAud:o.isRegAud||0,userName:o.userName,emailId:o.emailId,emailTag:o.emailTag,subscribeTag:o.subTag,groupName:o.groupName||"",w:0,isActivateX:!1,isActivateXAlternate:!1,activateX_AnimType:0,activateX_MaxMinutes:0,activateX_SecondClick_MaxMinutes:0,activateX_ThirdClick_MaxMinutes:0,isTest:!1,isSlideScrollUpHide:!1,isHideOnSubmitSlideCanvas:!1,hideOnSubmitSlideCanvas_MaxMinutes:0,isHideOnSubmitPopupCanvas:!1,hideOnSubmitPopupCanvas_MaxMinutes:0,canvasType:"",isReCaptchaOn:o.isReCaptchaOn,reCaptchaSiteKey:n.ZITUtils.decrypt(o.reCaptchaSiteKey),reCaptchaSecretKey:n.ZITUtils.decrypt(o.reCaptchaSecretKey)},i.pid=c.pid,i.isContentGate=c.isContentGate,i.isMembership=c.isMembership,i.isSignIn=c.isSignIn,i.wid=c.wid,i.widgetType=c.widgetType,i.animationType=c.animationType,i.variant=c.variant,i.funnelType=c.funnelType,n.ZITUtils.writeDebug("displayOtherCanvas:"+JSON.stringify(i)),u=c.index,i.wid>0&&i.widgetType==""?r.fix_get!=null&&typeof r.fix_get.widgetId!="undefined"&&r.fix_get.widgetId==i.wid?n.ZITloader.DisplayWidget(h[u],u,r.fix_get,i):r.fix_post!=null&&typeof r.fix_post.widgetId!="undefined"&&r.fix_post.widgetId==i.wid?n.ZITloader.DisplayWidget(h[u],u,r.fix_post,i):n.ZITUtils.writeDebug("Canvas not retrieved "+i.wid+" "+i.widgetType):i.widgetType=="canvas-panel"?i.animationType=="none"&&r.fix_get?n.ZITloader.DisplayWidget(h[u],u,r.fix_get,i):i.animationType=="slide"&&r.slide_get&&n.ZITloader.DisplayWidget(h[u],u,r.slide_get,i):i.widgetType=="canvas-email"?i.animationType=="none"&&r.fix_post?n.ZITloader.DisplayWidget(h[u],u,r.fix_post,i):i.animationType=="slide"&&r.slide_post&&n.ZITloader.DisplayWidget(h[u],u,r.slide_post,i):i.widgetType=="canvas-display"?r.display1&&i.variant==r.display1.variant?n.ZITloader.DisplayWidget(h[u],u,r.display1,i):r.display2&&i.variant==r.display2.variant?n.ZITloader.DisplayWidget(h[u],u,r.display2,i):r.display3&&i.variant==r.display3.variant?n.ZITloader.DisplayWidget(h[u],u,r.display3,i):r.display4&&i.variant==r.display4.variant?n.ZITloader.DisplayWidget(h[u],u,r.display4,i):r.display5&&i.variant==r.display5.variant&&n.ZITloader.DisplayWidget(h[u],u,r.display5,i):i.widgetType=="canvas-disclaimer"&&(r.disclaimer1&&i.wid>0&&i.wid==r.disclaimer1.widgetId&&n.ZITloader.DisplayWidget(h[u],u,r.disclaimer1,i),r.disclaimer2&&i.wid>0&&i.wid==r.disclaimer2.widgetId&&n.ZITloader.DisplayWidget(h[u],u,r.disclaimer2,i),r.disclaimer1&&i.wid==0&&n.ZITloader.DisplayWidget(h[u],u,r.disclaimer1,i))}else n.ZITFunctions.setCanvas(0)});n["ZIT.WidgetConfig"]=f.WidgetConfig},u=function(){var v=document.querySelectorAll(".zeddit-rcm"),d,rt,t,p,w,o,a,b,k,y,it;if(n.ZITwidgetContainers=v,v.length===0||n.ViewerLoader.isFirstRegWall<0)setTimeout(u,300),c--;else{for(n.ZITUtils.writeDebug("Panels found:"+v.length),n.ZITFunctions.totalCanvas=v.length,f.WidgetConfig=new Array(v.length),f.WidgetPopupContainerConfig=new Array(v.length),f.WidgetOtherContainerConfig=new Array(v.length),d=0,rt=v.length;d<rt;d++){if(t=v[d],t.classList.contains("is-cg")){n.ZITUtils.writeDebug("Detect data wall canvas to skip");continue}p=t.getAttribute("data-type")||"";w=t.getAttribute("animation-type")||"";w==""&&(w=t.getAttribute("data-animation-type")||"");var nt=t.getAttribute("data-iscg")||0,ut=t.getAttribute("variant")||0,g=t.getAttribute("data-wid")||0,tt=!1;n.ZITFunctions.testMode&&n.ZITFunctions.testData?(o=n.ZITFunctions.testData,o.testWidget>0&&(g<=0||o.testWidget==g)&&o.testAnamiation==w&&o.testCanvasType==p&&o.testContentG==nt&&(o.testCanvasType=="canvas-display"&&o.testVariant==ut?tt=!0:o.testCanvasType!="canvas-display"&&(tt=!0))):n.ZITUtils.writeDebug("Non-testMode skip supress logic ");a=!1;g==1186?a=!1:n.ZITFunctions.testMode&&!tt?(n.ZITUtils.writeDebug("testMode hide all live campaigns C:"+o.testCanvasType+"-"+p+" #A: "+o.testAnamiation+"-"+w+" #CG: "+o.testContentG+"-"+nt+" #V: "+o.testVariant+"-"+ut+" #W: "+o.testWidget+"-"+g),a=!1):n.ZITFunctions.useallowedCanvas&&nt==0&&p!=""&&p!="canvas-disclaimer"?n.ZITFunctions.allowedCAType.forEach(function(t){var i=p.replace("canvas-",""),r=i=="panel"?"get":i=="email"?"post":i;t.CT==r&&t.AT==w&&(a=!0,n.ZITUtils.writeDebug("Found allowed canvas "+t.CT+" "+t.AT));n.ZITUtils.writeDebug(i+" "+w+" "+JSON.stringify(t)+" "+r)}):a=!0;b=n.ZITUtils.readCookie("zit.session.slide.type.close")||"";b!=""&&w=="slide"&&(k=b=="get"?"canvas-panel":b=="post"?"canvas-email":b=="display"?"canvas-display":b=="hybrid"?"canvas-hybrid":"canvas-disclaimer",p==k&&(n.ZITUtils.writeDebug("The slide canvas of "+p+" has been closed within the session. The canvas will not be shown."),a=!1),n.ZITUtils.writeDebug("target type "+k));n.ViewerLoader.isFirstRegWall==1&&(n.ZITUtils.writeDebug("Hide normal canvas because first regwall."+n.ViewerLoader.isFirstRegWall),a=!1);n.ViewerLoader.HideNormalOnRegWall==1&&(n.ViewerLoader.accessresult==0||n.ViewerLoader.accessresult==5)&&(n.ZITUtils.writeDebug("Hide normal canvas because regwall."+n.ViewerLoader.HideNormalOnRegWall),a=!1);n.ZITFunctions.preferCanvasType==1&&k=="canvas-email"?(n.ZITUtils.writeDebug("Hide email canvas because panel canvas is preferred."),a=!1):n.ZITFunctions.preferCanvasType==2&&k=="canvas-panel"?(n.ZITUtils.writeDebug("Hide panel canvas because email canvas is preferred."),a=!1):t.getAttribute("data-pid")!=0&&t.getAttribute("data-pid")!=n.ZITFunctions.brandId?(n.ZITUtils.writeDebug("Hide panel canvas because invalid brandId "+t.getAttribute("data-pid")+" "+n.ZITFunctions.brandId),a=!1):n.ZITUtils.writeDebug(n.ZITFunctions.preferCanvasType+" "+k);a?(y={pid:t.getAttribute("data-pid")||0,isContentGate:t.getAttribute("data-iscg")||0,isMembership:t.getAttribute("data-ism")||0,isSignIn:t.getAttribute("data-issignin")||0,wid:t.getAttribute("data-wid")||0,widgetType:t.getAttribute("data-type")||"",animationType:t.getAttribute("animation-type")||"",variant:t.getAttribute("variant")||0,funnelType:t.getAttribute("funnel-type")||"",index:d},it=!1,y.pid!=n.ZITFunctions.brandId&&n.ZITFunctions.brandId>0&&y.pid>0&&(n.ZITUtils.writeDebug("Hide canvas because brandId is not consistent."+y.pid+" "+n.ZITFunctions.brandId),n.ZITFunctions.brandId!=1014&&n.ZITFunctions.brandId!=952&&n.ZITFunctions.brandId!=969?ZITFunctions.sendRaygunData(new Error("BrandId is not consistent V2 "+y.pid+" VS "+n.ZITFunctions.brandId),"CanvasBrand"):it=!0),it?n.ZITUtils.writeDebug(" block canvas container of different brand "+y.pid+" "+n.ZITFunctions.brandId):(y.animationType=="popup"?(f.WidgetPopupContainerConfig[l]=y,l++):(f.WidgetOtherContainerConfig[s]=y,s++),n.ZITUtils.writeDebug("Popup:"+l+"#Other:"+s))):(n.ZITUtils.writeDebug(" block empty canvas container"),n.ZITFunctions.setCanvas(0))}l>0?h(r.getAPIURL(!0),function(t){var c,o,u,h;if(t.response!=""&&(t.response.popup_get||t.response.popup_post)){var a=t.response,y=n.ZITFunctions.retrieveOrigSession(),p=n.ZITFunctions.retrieveCurSession(),r=n.ZITFunctions.retrieveTrackingData();for(c=0;c<l;c++)o=f.WidgetPopupContainerConfig[c],u={key:0,pid:0,isContentGate:0,isMembership:0,isSignIn:0,wid:0,widgetType:"",animationType:"",variant:0,funnelType:"",displays:0,remaining:0,isnew:0,defaultPageSize:4,isLocal:0,isDisplayWidget:!1,isNewCanvas:!0,brandUrl:"",widgetDisplayType:"",timeToFlash:5e3,timeToRemove:8e3,timeToDisplay:3e3,apiURL:"",layout:1,filterType:"",filterValue:"",noOfPostVisibleInCarousel:0,showThumbnail:!0,autoPlay:!1,closeType:3,appearAtScrollPosition:50,initSession:y,curSession:p,origId:y,emailpanelobject:"",isPreview:!1,isSandbox:!1,isOptOut:!1,hasFullName:!1,isDisclaimerShowFromStart:!1,apiKey:n.ZITFunctions.apiKey,isShowTab:!1,isSlide:!1,isAnimate:!1,popupShowOn:0,popupShowOnMobile:0,popupAppearAtScrollPosition:50,popupAppearAtScrollPositionMobile:50,scrollStatus:0,deviceForScrollStatus:0,slideShowOn:0,slideTimerTime:0,animateFrequency:0,popupDelayTime:0,popupDelayTimeMobile:0,doNotTrack:e,isR:r.R,pv:r.sP,dP:r.dP,dS:r.dS,tP:r.tP,tS:r.tS,cPs:r.cPs,lPs:r.lPs,lVd:r.lVd,F:r.F||0,Nba:r.Nba,dT:r.devT,isEmailAud:r.isEmailAud||0,isPanelAud:r.isPanelAud||0,isDropoff:r.isDropoff||0,isRegAud:r.isRegAud||0,userName:r.userName,emailId:r.emailId,emailTag:r.emailTag,subscribeTag:r.subTag,groupName:r.groupName||"",w:0,isActivateX:!1,isActivateXAlternate:!1,activateX_AnimType:0,activateX_MaxMinutes:0,activateX_SecondClick_MaxMinutes:0,activateX_ThirdClick_MaxMinutes:0,isTest:!1,isSlideScrollUpHide:!1,isHideOnSubmitSlideCanvas:!1,hideOnSubmitSlideCanvas_MaxMinutes:0,isHideOnSubmitPopupCanvas:!1,hideOnSubmitPopupCanvas_MaxMinutes:0,canvasType:"",isReCaptchaOn:r.isReCaptchaOn,reCaptchaSiteKey:n.ZITUtils.decrypt(r.reCaptchaSiteKey),reCaptchaSecretKey:n.ZITUtils.decrypt(r.reCaptchaSecretKey)},u.pid=o.pid,u.isContentGate=o.isContentGate,u.isMembership=o.isMembership,u.isSignIn=o.isSignIn,u.wid=o.wid,u.widgetType=o.widgetType,u.animationType=o.animationType,u.variant=o.variant,u.funnelType=o.funnelType,n.ZITUtils.writeDebug("Display Popup:"+JSON.stringify(u)),h=o.index,n.ZITFunctions.SubxLimitSlide&&(n.ZITFunctions.haspopup++,n.ZITUtils.writeDebug("Popup detected for limit slide brands "+n.ZITFunctions.haspopup)),u.widgetType=="canvas-panel"&&n.ZITloader.DisplayWidget(v[h],h,a.popup_get,u),u.widgetType=="canvas-email"&&n.ZITloader.DisplayWidget(v[h],h,a.popup_post,u);s>0?i():n.ZITUtils.writeDebug(" No other config found in the page")}else n.ZITUtils.writeDebug(" No popup retrieved from the server"),s>0?i():n.ZITUtils.writeDebug(" No other config found in the page")}):(n.ZITUtils.writeDebug(" No popup config found in the page"),s>0?i():n.ZITUtils.writeDebug(" No other config found in the page"))}},o=function(){n.ViewerLoader.accessFinished?u():setTimeout(o,1e3)};n.ZITFunctions.datawall==1&&n.ViewerLoader.accessresult>=0?t&&t.response?t.response.CurCanvas?(n.ZITUtils.writeDebug("Going to intialize "+t.response.CurCanvas.widgetId),n.ViewerLoader.customizedint(t.response.CurCanvas.widgetId,t.response.CurCanvas.getCanvasIdentifier,t)):n.ViewerLoader.customizedint(0,"",t):(n.ViewerLoader.accessFinished=!0,t?n.ZITUtils.writeDebug("No datawall data response."):n.ZITUtils.writeDebug("No datawall data.")):n.ZITFunctions.datawall==1?(n.ZITUtils.writeDebug("Skip Datawall because of Access PreCheck"+n.ViewerLoader.accessresult),typeof n.SubxClientEvents.is_first_twitter!="undefined"&&n.SubxClientEvents.is_first_twitter&&n.SubxClientEvents.addArticleId(),n.ViewerLoader.isFirstRegWall=0,n.ViewerLoader.accessFinished=!0,typeof n.SubxClientEvents.retrieveRegMember!="undefined"&&n.SubxClientEvents.retrieveRegMember(n.ZITFunctions.brandId)):(n.ViewerLoader.accessFinished=!0,typeof n.SubxClientEvents.retrieveRegMember!="undefined"&&n.SubxClientEvents.retrieveRegMember(n.ZITFunctions.brandId));ft||n.SubxClientEvents!="undefined"&&typeof n.SubxClientEvents.globalExclude!="undefined"&&n.SubxClientEvents.globalExclude()?n.ZITUtils.writeDebug("Skip Canvas because of Form Page or Global Exclude "):o();typeof n.SubxClientEvents.AfterCanvasInitialization!="undefined"&&n.SubxClientEvents.AfterCanvasInitialization()},initDataWallCanvas:function(t,i,r){n.ZITUtils.writeDebug("config:"+JSON.stringify(i));n.ZITloader.DisplayWidget(t,9,r,i);typeof n.SubxClientEvents.AfterDatawallCanvasInitialization!="undefined"&&n.SubxClientEvents.AfterDatawallCanvasInitialization()},initializeTestCanvas:function(t){var i,r;n.ZITFunctions.testData.testWidget<=0&&(n.ZITFunctions.testData.testWidget=t.tW,n.ZITFunctions.testData.testAnamiation=t.tA,n.ZITFunctions.testData.testCanvasType=t.tP,n.ZITFunctions.testData.testContentG=t.tC,n.ZITFunctions.testData.testVariant=t.tV||0,n.ZITFunctions.testData.testContentG==1&&n.ZITFunctions.testData.testWidget>0&&(n.ZITUtils.createCookieinDetails(n.ZITFunctions.spwCookieName,n.ZITFunctions.testData.testWidget,30,0,0,0),n.ZITUtils.writeDebug(n.ZITFunctions.spwCookieName+" has been updated to test w "+n.ZITFunctions.testData.testWidget),i=n.ZITUtils.readCookie("_doffer"),i&&i!=null&&n.ZITUtils.createCookieinDetails("_doffer",i,30,0,0,0),r=n.ZITFunctions.retrieveTrackingData(),n.ZITFunctions.clearReaderCounter(r)),(t.cC||0)==1&&n.ZITUtils.createCookie("_isFirst","",-1))},handleMemberCheckResult:function(t){if(t.LogOut==1)n.ZITFunctions.setLogOut();else{t.LogOut==2&&n.SubxClientEvents&&n.SubxClientEvents.CheckDaily&&n.SubxClientEvents.CheckDaily==1&&n.ZITUtils.createCookieinDetails("_MChecked",1,1,0,0,0);var i=n.ZITUtils.readCookie("_isMemAud")||0;i==1&&t.Username=="SubxUser"&&(n.ZITUtils.writeDebug("Creating Membership container"),n.ZITFunctions.testData.testWidget=5880,n.ZITFunctions.testData.testAnamiation="slide",n.ZITFunctions.testData.testCanvasType="canvas-email",n.ZITFunctions.testData.testContentG=0)}},initializeDataWallData:function(t){if(t.NotDataWall&&t.NotDataWall==1)n.ZITFunctions.datawall=0,n.ZITFunctions.setFilterOut(1),n.ZITUtils.writeDebug("Not data wall brand"),n.ViewerLoader.isFirstRegWall=0;else{n.ZITFunctions.datawall=1;n.ViewerLoader.toRemoveSpw=t.RSpw;n.ViewerLoader.toRemoveSpw==1&&n.ZITUtils.createCookie(n.ZITFunctions.spwCookieName,"",-1);n.ViewerLoader.htmlCode=t.AccessHtmlCode;n.ViewerLoader.accessresult=t.AccessResult;n.ViewerLoader.HideNormalOnFirstRegWall=t.HideNormalOnFirstRegWall;n.ViewerLoader.HideNormalOnRegWall=t.HideNormalOnRegWall;var i=n.ZITUtils.readCookie("_isMemAud")||0;n.ViewerLoader.HideNormalOnFirstRegWall==0&&r.isEmailAud==0&&r.isPanelAud==0&&i==0&&(n.ViewerLoader.isFirstRegWall=0);n.ViewerLoader.HideEmailAud=t.HideEmailAud;n.ViewerLoader.MemberEnabled=t.MemberEnabled;n.ViewerLoader.isRegister=t.isRegister}n.ZITUtils.writeDebug("First Reg "+n.ZITFunctions.spwCookieName+" "+n.ZITUtils.readCookie(n.ZITFunctions.spwCookieName)+" "+n.ViewerLoader.HideNormalOnFirstRegWall+" "+n.ViewerLoader.HideNormalOnRegWall+" "+n.ViewerLoader.isFirstRegWall)},listenToUserProfile:function(){n.ZITUtils.writeDebug("listenToUserProfile event detected email:"+n.subxEmail);typeof n.stopDatawall!="undefined"&&n.stopDatawall==!1&&n.datawallProcessed==!1?n.ZITloader.getDataWall():n.datawallProcessed==!1&&n.ZITFunctions.sendRaygunData(new Error("Skip listenToUserProfile event detected email v2:"+n.subxEmail+" "+n.stopDatawall+" "+n.datawallProcessed))},getDataWallTiming:function(){typeof n.SubxClientEvents=="undefined"||typeof n.SubxClientEvents.triggerEvent=="undefined"||n.SubxClientEvents.triggerEvent()?(n.ZITFunctions.dlEnabled&&typeof n.SubxClientEvents.readFromDataLayer!="undefined"?n.SubxClientEvents.readFromDataLayer():n.SubxClientEvents.retrieveData(),n.SubxClientEvents&&typeof n.SubxClientEvents.BeforeCanvasInitialization!="undefined"&&n.SubxClientEvents.BeforeCanvasInitialization(),typeof n.stopDatawall=="undefined"||n.stopDatawall==!1?(n.ZITUtils.writeDebug("Skip datawall event handler "+n.stopDatawall),n.ZITloader.getDataWall()):(n.ZITUtils.writeDebug("Skip datawall logic waiting for the event handler "+n.stopDatawall),n.addEventListener("subxgetprofile",()=>n.ZITloader.listenToUserProfile()))):n.ZITFunctions.dlEnabled?(n.ZITUtils.writeDebug("Waiting for datawall trigger event for another 100ms."),setTimeout(n.ZITloader.getDataWallTiming,100)):(n.ZITUtils.writeDebug("Waiting for journey-init trigger event."),n.addEventListener("journey-init",()=>n.ZITloader.getDataWallTiming()))},getDataWall:function(){n.stopDatawall=!0;n.datawallProcessed=!0;n.ZITUtils.writeDebug("Going to call getDatawall "+n.subxEmail+" "+n.stopDatawall);typeof n.SubxClientEvents.specialPath=="undefined"?n.ViewerLoader.specialPath=!1:(n.ViewerLoader.specialPath=n.SubxClientEvents.specialPath(),n.ZITUtils.writeDebug("Retrieve special Path from customized scrip "+n.ViewerLoader.specialPath+" "+n.SubxClientEvents.specialPath()));n.SubxClientEvents.RetrieveCategory();typeof n.SubxClientEvents!="undefined"&&typeof n.SubxClientEvents.retrieveRegMember!="undefined"&&n.SubxClientEvents.retrieveRegMember(n.ZITFunctions.brandId);var t=(new Date).getTime()-k;n.ZITUtils.writeDebug("Calling subxCore "+JSON.stringify(n.JOURNEY_INFO)+" Time:"+t+"ms ");h(u.getSubxCore(n.ZITFunctions.brandId),function(t){var a=(new Date).getTime()-k,i,f,u,o,s,c,h,l;n.ZITUtils.writeDebug("Get subxCore response "+JSON.stringify(n.JOURNEY_INFO)+" Time:"+a+"ms ");i=t.response;typeof n.JOURNEY_INFO=="undefined"||typeof n.JOURNEY_INFO.ads=="undefined"||!n.JOURNEY_INFO.ads||n.ZITFunctions.testMode?(n.ZITUtils.writeDebug("Ads detected "+JSON.stringify(n.JOURNEY_INFO)+" "+n.ZITFunctions.testMode),i.Result==3?(i.origId!=""&&(n.ZITFunctions.origSession=i.origId,f=i.origId,n.SubxClientEvents&&typeof n.SubxClientEvents.sendOrigSessionUpdateEvent!="undefined"&&n.SubxClientEvents.sendOrigSessionUpdateEvent(r.oS,f),r.oS=f),i.CrossDomainDebug&&i.CrossDomainDebug!=""&&n.ZITUtils.writeDebug(i.CrossDomainDebug),i.ConsoleMessage&&i.ConsoleMessage!=""&&n.ZITUtils.writeDebug(i.ConsoleMessage),i.CanvasTargetMessage&&i.CanvasTargetMessage!=""&&n.ZITUtils.writeDebug(i.CanvasTargetMessage),typeof n.SubxClientEvents!="undefined"&&typeof n.SubxClientEvents.InitializeCustomEvent!="undefined"&&n.SubxClientEvents.InitializeCustomEvent(i),typeof i.S3Block!="undefined"&&i.S3Block&&(parseInt(i.S3BlockExpDays)>0?n.ZITUtils.createCookieinDetails("_crossBlock",i.S3Block,parseInt(i.S3BlockExpDays),0,0,0):n.ZITUtils.createCookieinDetails("_crossBlock",i.S3Block,30,0,0,0)),typeof i.S3RA!="undefined"&&i.S3RA>0&&n.ZITUtils.createCookieinDetails("_rA",parseInt(i.S3RA),parseInt(i.S3RAExp),0,0,0),typeof i.S3RAReg!="undefined"&&i.S3RAReg>0&&n.ZITUtils.createCookieinDetails("_rAReg",parseInt(i.S3RAReg),parseInt(i.S3RARegExp),0,0,0),n.ZITUtils.writeDebug("To update Sxr "+i.Sxr+" "+i.S3SxrExp),r=n.ZITFunctions.updateTrackingDataCounter(r,i.CurSession,i.CDT,i.Sxr,i.S3SxrExp),r.ML=i.MLResult,i.RandomPage&&i.RandomPage>0&&(r.RP=i.RandomPage),r.CC=i.countryCode,typeof i.TotalPrice!="undefined"&&(r.TPrice=i.TotalPrice),u=n.ZITUtils.readCookie("_sem"),(u==null||typeof u=="undefined"||u==""||n.subxEmail&&n.subxEmail!="")&&i.EmailId&&i.EmailId!=""&&(n.ZITUtils.writeDebug("Going to update username "+i.EmailId),n.ZITFunctions.setUserName(i.EmailId)),i.groupName!=""&&(r.groupName=i.groupName=="NA"?"":i.groupName,n.ZITUtils.writeDebug("group updated "+i.groupName)),typeof i.dOffer!="undefined"&&i.dOffer>0&&(i.Nba==4?n.ZITUtils.createCookieinDetails("_doffer",i.dOffer,365,0,0,0):(o=n.ZITUtils.readCookie("_spw"),s=n.ZITUtils.readCookie("_doffer"),o&&o!=null&&s&&s!=null?n.ZITUtils.writeDebug("spw detected the offer is locked."):n.ZITUtils.createCookieinDetails("_doffer",i.dOffer,0,0,20,0))),typeof n.SubxClientEvents.sendOfferType!="undefined"&&typeof i.dOffer!="undefined"&&typeof i.Nba!="undefined"&&n.SubxClientEvents.sendOfferType(i.dOffer,i.Nba),n.ZITFunctions.preferCanvasType=i.canvasType,typeof i.deviceType!="undefined"&&i.deviceType<4&&(r.devT=i.deviceType,n.ZITUtils.writeDebug("deviceType updated "+r.devT)),n.SubxClientEvents&&typeof n.SubxClientEvents.setExpiredMem!="undefined"?i.LogOut==1&&n.SubxClientEvents.setExpiredMem():n.ZITloader.handleMemberCheckResult(i),r.Nba=i.Nba,n.ZITUtils.writeDebug("NBA Updated:"+r.Nba),(n.ZITFunctions.getCookieValue("_sxRD")||"")==""&&i.RegisterSession&&i.RegisterSession!=""&&(n.ZITFunctions.setRegAud(),n.ZITUtils.createCookieinDetails("_sxRD",i.RegisterSession,45,0,0,0)),typeof i.ANba!="undefined"&&(n.ZITUtils.createCookieinDetails("_sanba",i.ANba,30,0,0,0),n.ZITUtils.writeDebug("ai model update to "+i.ANba)),n.ZITFunctions.saveTrackingDataToSxo(r),n.ZITloader.initializeDataWallData(i),n.ZITloader.initializeTestCanvas(i),n.ZITloader.init(t),n.ZITAnalyticsLoader.init(),n.ZITFunctions&&n.ZITFunctions.sendDataLayer("subx-pageview",0,"")):i.Result==4?e=!0:i.Result<0&&(e=!0,n.ZITUtils.createCookieinDetails("zit.data.toexclude",1,7,0,0,0),n.ZITUtils.writeDebug(i.Message)),n.ZITFunctions.saveTrackingDataToSxo(r)):(r.ToBlock=0,c=(new Date).getTime()-k,n.ZITUtils.writeDebug("The template has been canceled by ads "+JSON.stringify(n.JOURNEY_INFO)+" Time:"+c+"ms "),n.JOURNEY_INFO={status:"completed",ads:!0,blocked:!1},typeof n.SubxClientEvents!="undefined"&&typeof n.SubxClientEvents.sendCustomizedEvent!="undefined"&&(n.SubxClientEvents.sendCustomizedEvent("journey-info",n.JOURNEY_INFO),n.ZITUtils.writeDebug("window.Journey_Info updated to "+JSON.stringify(n.JOURNEY_INFO))),i.RandomPage&&i.RandomPage>0&&(r.RP=i.RandomPage),r.Nba=i.Nba,typeof i.ANba!="undefined"&&(n.ZITUtils.createCookieinDetails("_sanba",i.ANba,30,0,0,0),n.ZITUtils.writeDebug("ai model update to "+i.ANba)),n.ViewerLoader.remainingArticle=t.response.RA,t.response.AccessResult==1&&n.ZITFunctions?(n.ZITFunctions.updateReaderCounter(i.RA),h=n.ZITUtils.readCookie("_sxcc"),h&&h!=""||(l=new Date,n.ZITUtils.createCookieinDetails("_sxcc",l.toLocaleString(),30,0,0,0))):t.response.AccessResult!=-10&&n.ZITFunctions.updateReaderCounter(i.RA),i.MLResult!=""&&(r.ML=i.MLResult),n.ZITFunctions.saveTrackingDataToSxo(r),n.ZITFunctions.dlEnabled&&typeof n.SubxClientEvents.readFromDataLayer!="undefined"?n.SubxClientEvents.readFromDataLayer(t):(n.SubxClientEvents.retrieveData(),n.ZITloader.init(t)),n.ZITAnalyticsLoader.init(),n.ZITFunctions&&n.ZITFunctions.sendDataLayer("subx-pageview",0,""))})}};n.ZITUtils={writeDebug:function(t){var i=n.ZITUtils.readCookie("_sd")||0;i==1&&console.log("subx tech:"+t)},xdr:function(n,t,i,r,u){var f;XMLHttpRequest?(f=new XMLHttpRequest,"withCredentials"in f&&(f.open(t,n,!0),f.onerror=u,f.onreadystatechange=function(){f.readyState===4&&(f.status>=200&&f.status<400?r(f.responseText):u(new Error("Response returned with non-OK status")))},f.send(i))):XDomainRequest?(f=new XDomainRequest,f.open(t,n),f.onerror=u,f.onload=function(){r(f.responseText)},f.send(i)):h(n,r)},dateToString:function(n,t,i,r,u){return n+"-"+(t+1)+"-"+i+"-"+r+"-"+u},dayToString:function(n,t,i){return n+"-"+(t+1)+"-"+i},readCookie:function(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0,f=u.length;i<f;i++){for(t=u[i];t.charAt(0)===" ";)t=t.substring(1,t.length);if(t.indexOf(r)===0)return t.substring(r.length,t.length)}return null},createCookie:function(t,i,r){var u=new Date;u.setTime(u.getTime()+r*864e5);var e="; expires="+u.toGMTString(),o=n.location.hostname,f="";f=o.indexOf("www")>=0?t+"="+i+e+"; path=/; domain="+o.replace("www","")+"; samesite=lax;":t+"="+i+e+"; path=/; samesite=lax;";n.ZITUtils.writeDebug("Cookie Update:"+f);document.cookie=f},sessionStore:function(n,t){var r=!1,i;try{sessionStorage&&(r=!0)}catch(u){}if(typeof t!="undefined"&&t!==null&&r&&sessionStorage.setItem(n,t),typeof t=="undefined"){if(r){i=sessionStorage.getItem(n);try{i=JSON.parse(i)}catch(u){i=i}return i}return null}t===null&&r&&sessionStorage.removeItem(n)},localStorageStore:function(t,i){var r=!1,u;try{localStorage&&(r=!0)}catch(f){}if(typeof i!="undefined"&&i!==null&&(r?localStorage.setItem(t,i):(n.ZITUtils.writeDebug("Local Storage not supported use cookie instead. "),n.ZITUtils.createCookie(t,i,365,0,0,0))),typeof i=="undefined")return r?u=localStorage.getItem(t):(n.ZITUtils.writeDebug("Local Storage not supported use cookie instead. "),u=n.ZITUtils.readCookie(t)),u;i===null&&(r?localStorage.removeItem(t):n.ZITUtils.createCookie(t,"",-1))},clearCookie:function(t){n.ZITUtils.writeDebug("To clear cookie because of reason "+t);n.ZITUtils.createCookie("zit.data.toexclude","1",-1);n.ZITUtils.createCookie("_sxo","",-1);n.ZITUtils.createCookie("sessionId","",-1)},createCookieinDetails:function(t,i,r,u,f,e){var o;this.createCookie(t,"",-1);o=new Date;o.setTime(o.getTime()+r*864e5+u*36e5+f*6e4+e*1e3);var c="; expires="+o.toGMTString(),h=t+"="+i+c+"; path=/;samesite=lax;",s=n.location.host;s.startsWith("www.")&&(s=s.replace("www.","."),h+="domain="+s+";");n.ZITUtils.writeDebug("Cookie Create:"+h);document.cookie=h},dayToString:function(n,t,i){return n+"-"+(t+1)+"-"+i},des_createKeys:function(n){var o;pc2bytes0=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964];pc2bytes1=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697];pc2bytes2=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272];pc2bytes3=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144];pc2bytes4=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256];pc2bytes5=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488];pc2bytes6=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746];pc2bytes7=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568];pc2bytes8=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578];pc2bytes9=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488];pc2bytes10=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800];pc2bytes11=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744];pc2bytes12=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128];pc2bytes13=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261];var s=n.length>=24?3:1,u=new Array(32*s),h=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],f,e,r=0,c=0,t;for(o=0;o<s;o++)for(left=n.charCodeAt(r++)<<24|n.charCodeAt(r++)<<16|n.charCodeAt(r++)<<8|n.charCodeAt(r++),right=n.charCodeAt(r++)<<24|n.charCodeAt(r++)<<16|n.charCodeAt(r++)<<8|n.charCodeAt(r++),t=(left>>>4^right)&252645135,right^=t,left^=t<<4,t=(right>>>-16^left)&65535,left^=t,right^=t<<-16,t=(left>>>2^right)&858993459,right^=t,left^=t<<2,t=(right>>>-16^left)&65535,left^=t,right^=t<<-16,t=(left>>>1^right)&1431655765,right^=t,left^=t<<1,t=(right>>>8^left)&16711935,left^=t,right^=t<<8,t=(left>>>1^right)&1431655765,right^=t,left^=t<<1,t=left<<8|right>>>20&240,left=right<<24|right<<8&16711680|right>>>8&65280|right>>>24&240,right=t,i=0;i<h.length;i++)h[i]?(left=left<<2|left>>>26,right=right<<2|right>>>26):(left=left<<1|left>>>27,right=right<<1|right>>>27),left&=-15,right&=-15,f=pc2bytes0[left>>>28]|pc2bytes1[left>>>24&15]|pc2bytes2[left>>>20&15]|pc2bytes3[left>>>16&15]|pc2bytes4[left>>>12&15]|pc2bytes5[left>>>8&15]|pc2bytes6[left>>>4&15],e=pc2bytes7[right>>>28]|pc2bytes8[right>>>24&15]|pc2bytes9[right>>>20&15]|pc2bytes10[right>>>16&15]|pc2bytes11[right>>>12&15]|pc2bytes12[right>>>8&15]|pc2bytes13[right>>>4&15],t=(e>>>16^f)&65535,u[c++]=f^t,u[c++]=e^t<<16;return u},des:function(t,i,r,u,f){var rt=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],ut=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-134217728,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-134217728,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-134217728,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-134217728,-2146435040,-2146402272,1081344],ft=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],et=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],ot=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],st=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],ht=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],ct=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696],b=n.ZITUtils.des_createKeys(t),h=0,l,c,s,a,v,o,e,w,y,d,p,g,nt,tt,lt=i.length,k=0,it=b.length==32?3:9;for(w=it==3?r?[0,32,2]:[30,-2,-2]:r?[0,32,2,62,30,-2,64,96,2]:[94,62,-2,32,64,2,30,-2,-2],i+="\0\0\0\0\0\0\0\0",result="",tempresult="",u==1&&(y=f.charCodeAt(h++)<<24|f.charCodeAt(h++)<<16|f.charCodeAt(h++)<<8|f.charCodeAt(h++),p=f.charCodeAt(h++)<<24|f.charCodeAt(h++)<<16|f.charCodeAt(h++)<<8|f.charCodeAt(h++),h=0);h<lt;){for(r?(o=i.charCodeAt(h++)<<16|i.charCodeAt(h++),e=i.charCodeAt(h++)<<16|i.charCodeAt(h++)):(o=i.charCodeAt(h++)<<24|i.charCodeAt(h++)<<16|i.charCodeAt(h++)<<8|i.charCodeAt(h++),e=i.charCodeAt(h++)<<24|i.charCodeAt(h++)<<16|i.charCodeAt(h++)<<8|i.charCodeAt(h++)),u==1&&(r?(o^=y,e^=p):(d=y,g=p,y=o,p=e)),s=(o>>>4^e)&252645135,e^=s,o^=s<<4,s=(o>>>16^e)&65535,e^=s,o^=s<<16,s=(e>>>2^o)&858993459,o^=s,e^=s<<2,s=(e>>>8^o)&16711935,o^=s,e^=s<<8,s=(o>>>1^e)&1431655765,e^=s,o^=s<<1,o=o<<1|o>>>31,e=e<<1|e>>>31,c=0;c<it;c+=3){for(nt=w[c+1],tt=w[c+2],l=w[c];l!=nt;l+=tt)a=e^b[l],v=(e>>>4|e<<28)^b[l+1],s=o,o=e,e=s^(ut[a>>>24&63]|et[a>>>16&63]|st[a>>>8&63]|ct[a&63]|rt[v>>>24&63]|ft[v>>>16&63]|ot[v>>>8&63]|ht[v&63]);s=o;o=e;e=s}o=o>>>1|o<<31;e=e>>>1|e<<31;s=(o>>>1^e)&1431655765;e^=s;o^=s<<1;s=(e>>>8^o)&16711935;o^=s;e^=s<<8;s=(e>>>2^o)&858993459;o^=s;e^=s<<2;s=(o>>>16^e)&65535;e^=s;o^=s<<16;s=(o>>>4^e)&252645135;e^=s;o^=s<<4;u==1&&(r?(y=o,p=e):(o^=d,e^=g));tempresult+=r?String.fromCharCode(o>>>24,o>>>16&255,o>>>8&255,o&255,e>>>24,e>>>16&255,e>>>8&255,e&255):String.fromCharCode(o>>>16&65535,o&65535,e>>>16&65535,e&65535);k+=r?16:8;k==512&&(result+=tempresult,tempresult="",k=0)}return result+tempresult},stringToHex:function(n){for(var i="",r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],t=0;t<n.length;t++)i+=r[n.charCodeAt(t)>>4]+r[n.charCodeAt(t)&15];return i},HexTostring:function(n){for(var r,i="",t=0;t<n.length;t+=2)r=parseInt(n.substring(t,t+2),16),i+=String.fromCharCode(r);return i},jsdecrypt:function(t,i){return n.ZITUtils.des(t,n.ZITUtils.HexTostring(i),0,0)},jsencrypt:function(t,i){return i&&i!=""?n.ZITUtils.stringToHex(n.ZITUtils.des(t,i,1,0)):""},decrypt:function(t){var i=n.ZITFunctions.host();return n.ZITUtils.jsdecrypt(i,t)},encrypt:function(t){var i=n.ZITFunctions.host();return n.ZITUtils.jsencrypt(i,t)},retieveQueryString:function(t,i){i||(i=n.location.href);t=t.replace(/[\[\]]/g,"\\$&");var u=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),r=u.exec(i);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}};rt=function(){var n=document.documentElement,t=document.body,r="scrollTop",i="scrollHeight";return n==null||t==null?100:(n[i]||t[i])-n.clientHeight<=0?100:(n[r]||t[r])/((n[i]||t[i])-n.clientHeight)*100};n.ZITAnalyticsLoader={timerReached:!1,firsttimerReached:!1,firstscroll:!1,maxPercent:0,maxRecPercent:30,initTrackingScrollDepth:function(){var u,o;if(e=e||n.doNotTrack=="1"||navigator.doNotTrack=="yes"||navigator.doNotTrack=="1"||navigator.msDoNotTrack=="1"||n.ZITUtils.readCookie("zit.data.toexclude")=="1",!e){var t=Math.ceil(rt()/10)*10,a=n.ZITFunctions.retrieveCurSession(),f=n.ZITFunctions.retrieveTrackingData();if(t>n.ZITAnalyticsLoader.maxPercent){n.ZITAnalyticsLoader.firsttimerReached||n.ZITAnalyticsLoader.timerReached?n.ZITAnalyticsLoader.firsttimerReached&&n.ZITUtils.writeDebug("Detect first timer reached "+t+" "+n.ZITAnalyticsLoader.maxPercent+" "+n.ZITAnalyticsLoader.firstScroll+"  "+n.ZITAnalyticsLoader.timerReached):(n.ZITAnalyticsLoader.firstScroll=!0,n.ZITUtils.writeDebug("Detect first scroll "+t+" "+n.ZITAnalyticsLoader.maxPercent+" "));n.ZITAnalyticsLoader.maxPercent=t;f.cPs=n.ZITAnalyticsLoader.maxPercent;n.ZITFunctions.saveTrackingDataToSxo(f);try{var s=new Date,h=new Date(2018,1,1),c=(s.getTime()-h.getTime())/1e3,i={sh:[],cPu:f.cPu,si:n.ZITUtils.readCookie("sessionId"),maxP:0,tm:(new Date).toISOString()},r=n.ZITUtils.localStorageStore("_scrH")||"";typeof r!="undefined"&&r!=""&&r!=null?(i=JSON.parse(r),i.si==""&&(i.si=n.ZITUtils.readCookie("sessionId")),typeof i.maxP=="undefined"&&(i.maxP=0)):n.ZITUtils.writeDebug("No _scrH has been detected.");u=!1;localStorage&&(u=!0);n.ZITUtils.writeDebug("ls Support:"+u+" "+t+" "+i.maxP);(u||t>i.maxP)&&(o={stime:c,sp:t},i.sh.push(o),t>i.maxP&&(i.maxP=t),n.ZITUtils.localStorageStore("_scrH",JSON.stringify(i)))}catch(l){n.ZITUtils.writeDebug(l)}}t>=30&&t>=n.ZITAnalyticsLoader.maxRecPercent&&t<=100&&(t>=90?n.ZITAnalyticsLoader.maxRecPercent=101:t>=60?n.ZITAnalyticsLoader.maxRecPercent=90:t>=30&&(n.ZITAnalyticsLoader.maxRecPercent=60),n.ZITFunctions.sendScrollData(n.ZITUtils.localStorageStore("_scrH"),t))}},init:function(){var t=this,i;if(e=e||n.doNotTrack=="1"||navigator.doNotTrack=="yes"||navigator.doNotTrack=="1"||navigator.msDoNotTrack=="1"||n.ZITUtils.readCookie("zit.data.toexclude")=="1",e){n.ZITUtils.writeDebug("sdnt disabled");return}i=function(){n.ZITUtils.writeDebug("scroll Timer going to be switched on "+n.ZITFunctions.timerReached+" "+n.ZITAnalyticsLoader.maxPercent);n.ZITFunctions.timerReached=!0;n.ZITFunctions.firsttimerReached=!0;n.ZITUtils.writeDebug("scroll Timer has been switched on "+n.ZITFunctions.timerReached+" "+n.ZITAnalyticsLoader.maxPercent);t.initTrackingScrollDepth();n.addEventListener?n.addEventListener("scroll",t.initTrackingScrollDepth,!1):n.attachEvent("scroll",t.initTrackingScrollDepth)};i()}};n.ZITFunctions={isAnalysisProcessed:!1,isDebug:!1,brandId:0,isDNT:0,gaEnabled:!1,dlEnabled:!1,categoryNo:0,origSession:"",curSession:"",processedCanvas:0,showCanvas:0,testMode:!1,curTrackingData:null,curDataLayer:null,SubxPopupClosed:0,SubxPopupOpened:0,SubxLimitSlide:!0,haspopup:0,useallowedCanvas:!1,allowedCAType:[],spwCookieName:"_spw",doffer:-1,preferCanvasType:-1,apiKey:"",keyword:"",datawall:0,dataLayerName:"",localStorageValue:"",dataLayerValue:"",dataLayer:0,cookieValue:"",testData:{},newpage:!1,host:function(){return n.location.hostname},encrypt:function(t){var i=n.ZITFunctions.host();return n.ZITUtils.jsencrypt(i,t)},sessionStore:function(t,i){return n.ZITUtils.sessionStore(t,i)},sendtoBlueConic:function(t){n.ZITFunctions.isDNT==1?n.ZITUtils.writeDebug("sendtoBlueConic DNT datatracking disabled."):typeof n.SubxClientEvents.blueConic!="undefined"&&n.SubxClientEvents.blueConic==1?(n.ZITUtils.writeDebug(n.SubxClientEvents.blueConic),n.SubxClientEvents.sendtoBlueConic(t)):n.ZITUtils.writeDebug("blueConic is not enabled.")},updateSessionHistory:function(t,i){var r="",e=0,u=n.ZITUtils.localStorageStore("_ssh")||"",o="",f=u.indexOf(t),s;return n.ZITUtils.writeDebug("Update session index "+t+" "+u+" "+f),u==""||f<0||i.SFreq<=0?(s=u.split(","),s.length>0?s.forEach(function(t){var i;if(t!=""){e=e+1;var u=new Date,f=new Date(2018,1,1),s=(u.getTime()-2592e6-f.getTime())/6e4;try{i=parseInt(t);i>s?(o=t,r=r.concat(t),r=r.concat(",")):n.ZITUtils.writeDebug("Session "+t+" has been removed.")}catch(h){}}}):n.ZITUtils.writeDebug("No session histories detected."),o!=""&&f<0&&(n.ZITUtils.writeDebug("Detected last session Id "),i.pspv=i.sP,i.pslv=parseInt(t)-parseInt(o)-parseInt(i.cdT),i.pssSr=i.sSr,i.pswN=i.wN,i.psdS=i.dS,i.pscdT=parseInt(i.pscdT)+parseInt(i.cdT)),f<0?(r=r.concat(t),r=r.concat(","),i.SFreq=e+1,i.sSr=0,i.sWids=[],i.wN=0,i.cdT=0):(i.SFreq=e,n.ZITUtils.writeDebug("No new session detected.")),n.ZITUtils.localStorageStore("_ssh",r),n.ZITUtils.writeDebug("SF updated to "+i.SFreq),n.ZITFunctions.saveTrackingDataToSxo(i),n.ZITUtils.writeDebug(JSON.stringify(i))):n.ZITUtils.writeDebug("No new session detected."+u+" "+f+" "+i.SFreq),i},updateCategoryInfo:function(t){var u;if(t&&t!="")try{var e=n.ZITUtils.readCookie("_cath")||"",o=n.ZITUtils.readCookie("_cfreqh")||"",i=e.split(","),r=o.split(","),u=0,f=!1;if(i.length>0&&r.length>0&&i.length==r.length)for(u=0;u<i.length;u++)i[u]==t&&(r[u]=parseInt(r[u])+1,f=!0);else i=[],r=[];f||(i.push(t),r.push(1));n.ZITUtils.createCookieinDetails("_cath",i.join(","),30,0,0,0);n.ZITUtils.createCookieinDetails("_cfreqh",r.join(","),30,0,0,0)}catch(s){n.ZITFunctions.sendRaygunData(s,"Error in updateCategoryInfo")}},updateSessionInfo:function(t){var r=!1,i=n.ZITFunctions.curSession;return t==""||i&&i==t?(n.SubxClientEvents.sessionId=i,n.SubxClientEvents.Source=n.ZITUtils.readCookie("_sxoSource")):(n.ZITUtils.writeDebug("New Session detected"),n.ZITUtils.createCookieinDetails("sessionId",t,0,0,20,0),document.referrer&&document.referrer!=""?(n.ZITUtils.createCookieinDetails("_sxoSource",document.referrer,0,0,20,0),n.SubxClientEvents.Source=document.referrer):(n.ZITUtils.createCookieinDetails("_sxoSource","Organic",0,0,20,0),n.SubxClientEvents.Source="Organic"),n.SubxClientEvents.sessionId=t,n.ZITFunctions.curSession=t,r=!0),r},removeQueryString:function(n){const t=new URL(n);return t.search="",t.toString()},updateTrackingDataCounter:function(i,r,u,f,e){var h=n.ZITFunctions.removeQueryString(n.location.href),s,a;if(n.ZITFunctions.isDNT==1)return i.cPu!=h&&(i.cPu=h,n.ZITFunctions.newpage=!0),i;var c=new Date,l=n.ZITUtils.dayToString(c.getFullYear(),c.getMonth(),c.getDate()),o=null;return f!=null&&f!=""&&e>0?(o=JSON.parse(f),i.sM=o.sM,i.dM=o.dM,i.tM=o.tM,i.sM2=o.sM2,i.dM2=o.dM2,i.tM2=o.tM2,i.RA=o.RA,i.lVd=o.lVd,n.ZITUtils.writeDebug("Reading Counter updated from s3 "+JSON.stringify(o)+" "+e)):n.SubxClientEvents&&typeof n.SubxClientEvents.retrieveReadingData!="undefined"&&(o=n.SubxClientEvents.retrieveReadingData(),n.ZITUtils.writeDebug("Reading Counter detected "+JSON.stringify(o))),(i.lVd==""||i.lVd!=l)&&(n.ZITUtils.writeDebug("New Date detected "+l),i.lVd!=""&&(i.R=1),i.lVd=l,i.tP=typeof i.tP=="undefined"?typeof i.dP=="undefined"?0:i.dP:parseInt(i.tP)+parseInt(i.dP),i.tM=typeof i.tM=="undefined"?typeof i.dM=="undefined"?0:i.dM:parseInt(i.tM)+parseInt(i.dM),i.tM2=typeof i.tM2=="undefined"?typeof i.dM2=="undefined"?0:i.dM2:parseInt(i.tM2)+parseInt(i.dM2),i.dM=0,i.dM2=0,o!=null&&(o=n.SubxClientEvents.intializeDailyReadingData(o),n.ZITUtils.writeDebug("IntializeDailyReadingData "+JSON.stringify(o))),i.tS=parseInt(i.tS)+parseInt(i.dS),i.dS=0,i.pscdT=0,i.cPu=""),n.ZITUtils.localStorageStore("_sxpca",null),s=n.ZITFunctions.updateSessionInfo(r),(s||i.SFreq<0)&&(i=n.ZITFunctions.updateSessionHistory(r,i)),s?(i.dS=parseInt(i.dS)+1,i.dS>1&&(i.R=1),i.sP=1,i.sM=0,i.sM2=0,o!=null&&(o.sM=0,o.sM2=0,n.ZITUtils.writeDebug("readingCounter updated "+JSON.stringify(o)))):i.cdT=parseInt(u)-parseInt(r),o!=null&&(o.sM=i.sM,o.dM=i.dM,o.tM=i.tM,o.sM2=i.sM2,o.dM2=i.dM2,o.tM2=i.tM2,o.RA=i.RA,n.SubxClientEvents.saveReadingDataToSxr(o,e)),(s||i.cPu!=n.location.href)&&(n.ZITUtils.writeDebug("New Page detected"),i.dP=parseInt(i.dP)+1,i.sSr=parseInt(i.sSr)+parseInt(i.cPs),Array.isArray(i.lPs)?(i.lPs.length>4&&i.lPs.shift(),i.lPs.push(i.cPs)):typeof i.lPs!=t?(a=i.lPs,i.lPs=[],i.lPs.push(a),i.lPs.push(i.cPs)):(i.lPs=[],i.lPs.push(i.cPs)),i.cPs=1,s||(i.sP=parseInt(i.sP)+1),i.cPu=h,n.ZITFunctions.newpage=!0),i},InitiateDataLayer:function(){var t=n.ZITUtils.readCookie("_sxgdl");return n.ZITFunctions.curDataLayer=t?JSON.parse(t):{sxCn:"",sxC:"L",sxCs:"L",sxCd:"L",sxCv:"L",sxTg:"",sxId:"subxId",sxCid:"canvasId",sxTid:"",event:""},n.ZITFunctions.curDataLayer},InitiateTrackingData:function(){if(n.location.href.indexOf("debugWid=")>0&&(n.ZITFunctions.testMode=!0,n.ZITUtils.writeDebug("Subx Enter Test Mode")),n.ZITFunctions.retrieveTrackingData(),n.ZITFunctions.retrieveCurSession(),typeof n.ZITFunctions.curTrackingData.oS=="undefined"||n.ZITFunctions.curTrackingData.oS==""||n.ZITFunctions.curTrackingData.oS==null){var t=n.ZITloader.getQueryString("origSession"),i="orig";(t==null||t=="")&&(i="subx",t=n.ZITloader.getQueryString("subx"));t!=null&&(n.ZITFunctions.curTrackingData.oS=t,n.ZITUtils.writeDebug("Cross domain subx identified from "+i+" "+t),n.SubxClientEvents&&typeof n.SubxClientEvents.sendOrigSessionUpdateEvent!="undefined"&&n.SubxClientEvents.sendOrigSessionUpdateEvent(t,null))}return n.ZITFunctions.origSession=n.ZITFunctions.curTrackingData.oS,n.ZITFunctions.curTrackingData.cPu&&n.location.href!=n.ZITFunctions.curTrackingData.cPu?(n.ZITFunctions.newpage=!0,n.SubxClientEvents&&n.SubxClientEvents.scriptGroup=="VoxUS"&&(n.ZITFunctions.curTrackingData.tWids=[])):n.ZITFunctions.newpage=!1,n.ZITUtils.writeDebug("Inital tracking data "+JSON.stringify(n.ZITFunctions.curTrackingData)+" "+n.ZITFunctions.curTrackingData.oS+" "+n.ZITFunctions.newpage),n.ZITFunctions.isDNT==0&&n.ZITFunctions.UpdateFrequency(),n.ZITFunctions.testData={testWidget:0,testAnamiation:"",testCanvasType:"",testVariant:0,testContentG:0},n.ZITFunctions.curTrackingData},UpdateFrequency:function(){var e=n.ZITUtils.readCookie("_sxh")||"",c=new Date(2020,10,1),l=new Date,o=Math.floor((l.getTime()-c.getTime())/864e5),a=o.toString().concat(","),v=e.indexOf(a),s=0,t="",r=0,h=0,u=0,i,f;e==""||v<0?(n.ZITUtils.writeDebug("Welcome."+c+" "+l+" "+o),i=e.split(","),i.length>0&&i.forEach(function(n){var i=parseInt(n);i>=o-30&&i>=0&&(t=t.concat(n),t=t.concat(","),s=s+1)}),t=t.concat(a),i=t.split(","),i.length>0&&i.forEach(function(t){var i=parseInt(t);r=h==0||h+1==i?r+1:0;r>u&&(u=r,n.ZITUtils.writeDebug("max update to "+u));h=i}),n.ZITFunctions.curTrackingData.F=s+1,n.ZITFunctions.curTrackingData.RF=u,n.ZITFunctions.curTrackingData.RP=0,n.ZITFunctions.curTrackingData.ML="",n.ZITFunctions.saveTrackingDataToSxo(n.ZITFunctions.curTrackingData),n.ZITUtils.writeDebug("RP updated to 0 and RF updated to "+n.ZITFunctions.curTrackingData.RF),n.ZITUtils.createCookieinDetails("_sxh",t,30,0,0,0),n.ZITUtils.readCookie("_sanba")!=null&&(n.ZITUtils.readCookie("_sanba")==2||n.ZITUtils.readCookie("_sanba")==3)&&(f=n.ZITUtils.readCookie("_spw"),f&&f!=""?n.ZITUtils.writeDebug("Already blocked before "+f):n.ZITUtils.createCookie("_sanba","",-1))):n.ZITUtils.writeDebug("Repeat Occurance")},retrieveCurSession:function(){return(typeof n.ZITFunctions.curSession=="undefined"||n.ZITFunctions.curSession=="")&&(n.ZITFunctions.curSession=typeof n.ZITUtils.readCookie("sessionId")!="undefined"?n.ZITUtils.readCookie("sessionId"):n.ZITUtils.readCookie("sessionId")),n.ZITFunctions.curSession?n.ZITFunctions.curSession:""},retrieveSFOTrackingData:function(){if(n.ZITFunctions.curSfoTrackingData==null){var t=n.ZITUtils.readCookie("_sfo");t?(n.ZITUtils.writeDebug(t),n.ZITFunctions.curSfoTrackingData=JSON.parse(t)):n.ZITFunctions.curSfoTrackingData={origSession:"",lastUrl:"",deviceType:0,curSession:"",readArticle:0,hascanvas:0,isReCaptchaOn:!1,reCaptchaSiteKey:"",reCaptchaSecretKey:"",hideNomralCanvasOnFirstReg:0}}return typeof n.ZITFunctions.curSfoTrackingData.hascanvas=="undefined"&&(n.ZITFunctions.curSfoTrackingData.hascanvas=0),typeof n.ZITFunctions.curSfoTrackingData.isReCaptchaOn=="undefined"&&(n.ZITFunctions.curSfoTrackingData.isReCaptureOn=!1),typeof n.ZITFunctions.curSfoTrackingData.reCaptchaSiteKey=="undefined"&&(n.ZITFunctions.curSfoTrackingData.reCaptchaSiteKey=""),typeof n.ZITFunctions.curSfoTrackingData.reCaptchaSecretKey=="undefined"&&(n.ZITFunctions.curSfoTrackingData.reCaptchaSecretKey=""),typeof n.ZITFunctions.curSfoTrackingData.hideNomralCanvasOnFirstReg=="undefined"&&(n.ZITFunctions.curSfoTrackingData.hideNomralCanvasOnFirstReg=0),n.ZITFunctions.curSfoTrackingData},updateSPWCookie:function(){n.ViewerLoader.specialPath?(n.ZITFunctions.spwCookieName="_smpw",n.ZITUtils.writeDebug(n.ZITFunctions.spwCookieName)):typeof n.SubxClientEvents.isSpecialSection!="undefined"?(n.ZITUtils.writeDebug("spwCookie to update "+n.ZITFunctions.spwCookieName+" "+n.SubxClientEvents.isSpecialSection()),typeof n.SubxClientEvents.isSpecialSection!="undefined"&&n.SubxClientEvents.isSpecialSection()&&n.ZITFunctions.spwCookieName=="_spw"?n.ZITFunctions.spwCookieName="_sspw":typeof n.SubxClientEvents.isSpecialSection=="undefined"||n.SubxClientEvents.isSpecialSection()||n.ZITFunctions.spwCookieName!="_sspw"||(n.ZITFunctions.spwCookieName="_spw"),n.ZITUtils.writeDebug("spwCookie update to "+n.ZITFunctions.spwCookieName)):(n.ZITFunctions.spwCookieName="_spw",n.ZITUtils.writeDebug("No cookie "+n.ZITFunctions.brandId+" "+n.location.href+" "+n.location.href.indexOf("/mhsquad/")))},retrieveTrackingData:function(){var t,i;return n.ZITFunctions.curTrackingData==null&&(t=n.ZITUtils.readCookie("_sxo"),n.ZITFunctions.curTrackingData=t?JSON.parse(t):{R:0,tP:0,tM:0,sP:0,sM:0,dP:0,dM:0,dS:0,tS:0,cPs:0,lPs:[],sSr:0,sWids:[],wN:0,cdT:0,F:0,RF:0,w:0,SFreq:0,last_wid:0,bid:0,accNo:"",clientId:"",isEmailAud:0,isPanelAud:0,hDW:0,isRegAud:0,isExAud:0,isDropoff:0,devT:4,exPW:0,Nba:-1,userName:"",dataLayer:"",localSt:"",emailId:"",emailTag:"",subTag:"",lVd:"",oS:"",cPu:"",pspv:0,pslv:0,pssSr:0,pswN:0,psdS:0,pscdT:0,RP:0,TPrice:0,ML:"",isReCaptchaOn:!1,reCaptchaSiteKey:"",reCaptchaSecretKey:"",extRefer:""}),typeof n.ZITFunctions.curTrackingData.RF=="undefined"&&(n.ZITFunctions.curTrackingData.RF=0),typeof n.ZITFunctions.curTrackingData.tS=="undefined"&&(n.ZITFunctions.curTrackingData.tS=0),typeof n.ZITFunctions.curTrackingData.dP=="undefined"&&(n.ZITFunctions.curTrackingData.dP=0),typeof n.ZITFunctions.curTrackingData.dM=="undefined"&&(n.ZITFunctions.curTrackingData.dM=0),typeof n.ZITFunctions.curTrackingData.tM=="undefined"&&(n.ZITFunctions.curTrackingData.tM=0),typeof n.ZITFunctions.curTrackingData.sM=="undefined"&&(n.ZITFunctions.curTrackingData.sM=0),typeof n.ZITFunctions.curTrackingData.dM2=="undefined"&&(n.ZITFunctions.curTrackingData.dM2=0),typeof n.ZITFunctions.curTrackingData.tM2=="undefined"&&(n.ZITFunctions.curTrackingData.tM2=0),typeof n.ZITFunctions.curTrackingData.sM2=="undefined"&&(n.ZITFunctions.curTrackingData.sM2=0),typeof n.ZITFunctions.curTrackingData.isRegAud=="undefined"&&(n.ZITFunctions.curTrackingData.isRegAud=0),(typeof n.ZITFunctions.curTrackingData.SFreq=="undefined"||n.ZITFunctions.curTrackingData.SFreq==null)&&(n.ZITFunctions.curTrackingData.SFreq=0),typeof n.ZITFunctions.curTrackingData.Nba=="undefined"&&(n.ZITFunctions.curTrackingData.Nba=-1),typeof n.ZITFunctions.curTrackingData.sSr=="undefined"&&(n.ZITFunctions.curTrackingData.sSr=0),typeof n.ZITFunctions.curTrackingData.sWids=="undefined"&&(n.ZITFunctions.curTrackingData.sWids=[]),typeof n.ZITFunctions.curTrackingData.wN=="undefined"&&(n.ZITFunctions.curTrackingData.wN=0),typeof n.ZITFunctions.curTrackingData.pspv=="undefined"&&(n.ZITFunctions.curTrackingData.pspv=0),typeof n.ZITFunctions.curTrackingData.pslv=="undefined"&&(n.ZITFunctions.curTrackingData.pslv=0),typeof n.ZITFunctions.curTrackingData.pssSr=="undefined"&&(n.ZITFunctions.curTrackingData.pssSr=0),typeof n.ZITFunctions.curTrackingData.pswN=="undefined"&&(n.ZITFunctions.curTrackingData.pswN=0),typeof n.ZITFunctions.curTrackingData.psdS=="undefined"&&(n.ZITFunctions.curTrackingData.psdS=0),typeof n.ZITFunctions.curTrackingData.pscdT=="undefined"&&(n.ZITFunctions.curTrackingData.pscdT=0),typeof n.ZITFunctions.curTrackingData.cdT=="undefined"&&(n.ZITFunctions.curTrackingData.cdT=0),typeof n.ZITFunctions.curTrackingData.isDropoff=="undefined"&&(n.ZITFunctions.curTrackingData.isDropoff=0),typeof n.ZITFunctions.curTrackingData.extRefer=="undefined"&&(n.ZITFunctions.curTrackingData.extRefer=""),typeof n.ZITFunctions.curTrackingData.isReCaptchaOn=="undefined"&&(n.ZITFunctions.curTrackingData.isReCaptchaOn=!1),typeof n.ZITFunctions.curTrackingData.reCaptchaSiteKey=="undefined"&&(n.ZITFunctions.curTrackingData.reCaptchaSiteKey=""),typeof n.ZITFunctions.curTrackingData.reCaptchaSecretKey=="undefined"&&(n.ZITFunctions.curTrackingData.reCaptchaSecretKey=""),typeof n.ZITFunctions.curTrackingData.hDW=="undefined"&&(n.ZITFunctions.curTrackingData.hDW=0,i=n.ZITUtils.readCookie("_spw"),n.ZITFunctions.curTrackingData.hDW=i&&i!=null?1:0),(typeof n.ZITFunctions.curTrackingData.RA=="undefined"||n.ZITFunctions.curTrackingData.RA<0)&&(n.ZITFunctions.curTrackingData.RA=0),n.ViewerLoader.remainingArticle=n.ZITFunctions.curTrackingData.RA,typeof n.ZITFunctions.curTrackingData.RP=="undefined"&&(n.ZITFunctions.curTrackingData.RP=0),typeof n.ZITFunctions.curTrackingData.TPrice=="undefined"&&(n.ZITFunctions.curTrackingData.TPrice=0),typeof n.ZITFunctions.curTrackingData.ML=="undefined"&&(n.ZITFunctions.curTrackingData.ML=""),n.ZITFunctions.curTrackingData},retrieveNBA:function(){var t="";return n.ZITFunctions.curTrackingData==null&&n.ZITFunctions.retrieveTrackingData(),n.ZITFunctions.curTrackingData!=null&&(t="N"+n.ZITFunctions.curTrackingData.Nba),n.ZITUtils.writeDebug("nba retrieved:N"+t),t},retrieveOrigSession:function(){var t="";return n.ZITFunctions.curTrackingData==null&&n.ZITFunctions.retrieveTrackingData(),n.ZITFunctions.curTrackingData!=null&&(t=n.ZITFunctions.curTrackingData.oS),n.ZITUtils.writeDebug("id retrieved:"+t),t},retrieveVisitorType:function(){var t=1;return n.ZITFunctions.curTrackingData==null&&n.ZITFunctions.retrieveTrackingData(),n.ZITFunctions.curTrackingData!=null&&n.ZITFunctions.curTrackingData&&(n.ZITFunctions.curTrackingData.F>1||n.ZITFunctions.curTrackingData.dS>1)&&(t=2),n.ZITUtils.writeDebug("visitor type retrieved:"+t),t},retrieveTestGroup:function(){var t="";return n.ZITFunctions.curTrackingData==null&&n.ZITFunctions.retrieveTrackingData(),n.ZITFunctions.curTrackingData!=null&&(t=n.ZITFunctions.curTrackingData.groupName),n.ZITUtils.writeDebug("Test Group retrieved:"+t),t},retrieveDeviceType:function(){var t=4;return n.ZITFunctions.curTrackingData==null&&n.ZITFunctions.retrieveTrackingData(),n.ZITFunctions.curTrackingData!=null&&n.ZITFunctions.curTrackingData&&typeof n.ZITFunctions.curTrackingData.devT!="undefined"&&(t=n.ZITFunctions.curTrackingData.devT),n.ZITUtils.writeDebug("device type retrieved:"+t+" "+n.ZITUtils.readCookie("_sxo")),t},retrieveFreq:function(){var t=0;return n.ZITFunctions.curTrackingData==null&&n.ZITFunctions.retrieveTrackingData(),n.ZITFunctions.curTrackingData!=null&&n.ZITFunctions.curTrackingData&&typeof n.ZITFunctions.curTrackingData.F!="undefined"&&(t=n.ZITFunctions.curTrackingData.F),n.ZITUtils.writeDebug("freq retrieved:"+t+" "+n.ZITUtils.readCookie("_sxo")),t},retrieveSPV:function(){var t=0;return n.ZITFunctions.curTrackingData==null&&n.ZITFunctions.retrieveTrackingData(),n.ZITFunctions.curTrackingData!=null&&(n.ZITFunctions.curTrackingData&&typeof n.ZITFunctions.curTrackingData.dP!="undefined"&&(t=n.ZITFunctions.curTrackingData.dP),n.ZITFunctions.curTrackingData&&typeof n.ZITFunctions.curTrackingData.tP!="undefined"&&(t=t+n.ZITFunctions.curTrackingData.tP)),n.ZITUtils.writeDebug("total page view retrieved:"+t+" "+n.ZITUtils.readCookie("_sxo")),t},retrieveRetUrl:function(){var t=n.ZITFunctions.retrieveTrackingData();return t.cPu},retrieveDropoffStage:function(){var t=0;return n.ZITFunctions.curTrackingData==null&&n.ZITFunctions.retrieveTrackingData(),n.ZITFunctions.curTrackingData!=null&&n.ZITFunctions.curTrackingData&&typeof n.ZITFunctions.curTrackingData.isDropoff!="undefined"&&(t=n.ZITFunctions.curTrackingData.isDropoff),n.ZITUtils.writeDebug("dropoff retrieved:"+t),t},updateCanvasTitleToCookie:function(t,i){try{var u=n.ZITUtils.localStorageStore("_sxpca"),r=[];typeof u!="undefined"&&u!=null&&u!=""&&(r=JSON.parse(u));r.length>0&&r.forEach(function(r){var f,u;r.canvasId==t.canvasId&&(f="title-wid-"+t.canvasId,n.ZITUtils.writeDebug("Going to search for "+f),u=i.getElementsByClassName(f),u&&u.length>0?r.canvasTitle=u[0].innerText:(r.canvasTitle="",n.ZITUtils.writeDebug("No title retrieved for the canvas")),n.ZITUtils.writeDebug("Canvas Data has been updated "+JSON.stringify(r)))});n.ZITUtils.localStorageStore("_sxpca",JSON.stringify(r))}catch(f){n.ZITFunctions.sendRaygunData(f,"updateCanvasTitleToCookieV2-"+r.canvasId)}},updateStartCanvasTitleToCookie:function(t,i){try{var u=n.ZITUtils.localStorageStore("_sxpca"),r=[];typeof u!="undefined"&&u!=null&&u!=""&&(r=JSON.parse(u));r.length>0&&r.forEach(function(r){r.canvasId==t&&(r.canvasTitle=i,n.ZITUtils.writeDebug("Canvas Data has been updated "+JSON.stringify(r)))});n.ZITUtils.localStorageStore("_sxpca",JSON.stringify(r))}catch(f){n.ZITFunctions.sendRaygunData(f,"updateCanvasTitleToCookieV2-"+r.canvasId)}},saveCanvasDataToCookie:function(i,r){var u,s,e;try{if(u=r.getElementsByClassName("zit-widget-wrapper--new-panel"),u!=null&&u.length>0?(i.canvasName=u[0].getAttribute("data-name"),i.linkText=u[0].getAttribute("data-ctaText"),i.promoName=u[0].getAttribute("data-campaignName"),i.desc=u[0].getAttribute("data-desc"),i.price=u[0].getAttribute("data-price"),s="title-wid-"+i.canvasId,n.ZITUtils.writeDebug("Going to search for "+s),e=r.getElementsByClassName(s),e&&e.length>0?i.canvasTitle=e[0].innerText:(i.canvasTitle="",n.ZITUtils.writeDebug("No title retrieved for the canvas")),n.ZITUtils.writeDebug("Canvas retrieved from container "+i.canvasName)):n.ZITUtils.writeDebug("No element retrieved."),typeof i!=t){var o=n.ZITUtils.localStorageStore("_sxpca"),f=[],h=!1;typeof o!="undefined"&&o!=null&&o!=""&&(f=JSON.parse(o));f.length>0&&f.forEach(function(n){n.canvasId==i.canvasId&&(h=!0,n.promoName=i.promoName,n.linkText=i.linkText,n.canvasName=i.canvasName,n.desc=i.desc,n.price=i.price,n.canvasTitle=i.canvasTitle)});h?n.ZITUtils.writeDebug("Canvas already exists."+i.canvasId):(n.ZITUtils.writeDebug("Canvas Data will be added "+JSON.stringify(i)),f.push(i));n.ZITUtils.localStorageStore("_sxpca",JSON.stringify(f));n.ZITUtils.writeDebug("Canvas Data updated "+JSON.stringify(f))}else n.ZITUtils.writeDebug("No Canvas Data to write.")}catch(c){typeof n.SubxClientEvents.sendJAMDataEvent!="undefined"&&n.ZITFunctions.sendRaygunData(c,"saveCanvasDataToCookie-"+i.canvasId);console.error(c)}},retrieveCanvasDataFrmCookie:function(t){var r,u,f,i;try{if(n.ZITUtils.writeDebug("retrieveCanvasDataFrmStorage "+t),t>0){if(typeof n.SubxClientEvents!="undefined"&&typeof n.SubxClientEvents.retrieveInfoFromHtml!="undefined"&&(i=n.SubxClientEvents.retrieveInfoFromHtml(t),i!=null))return i;if(r=n.ZITUtils.localStorageStore("_sxpca"),u=[],typeof r!="undefined"&&r!=null&&r!=""&&(u=JSON.parse(r)),u.length>0){for(f=0;f<u.length;f++)if(i=u[f],i.canvasId==t)return n.ZITUtils.writeDebug("Cookie found "+JSON.stringify(i)+": "+t),i}else n.ZITUtils.writeDebug("Cookie "+u.length+": "+r)}else n.ZITUtils.writeDebug("Empty Canvas "+t)}catch(e){n.ZITFunctions.sendRaygunData(e,"retrieveCanvasDataFrmCookie-"+t)}return null},saveCanvasClickUrlToCookie:function(t,i){var f=0,u,r;try{i!=""&&t>0?(u=n.ZITUtils.localStorageStore("_sxpca"),r=[],typeof u!="undefined"&&u!=null&&u!=""&&(r=JSON.parse(u)),r.length>0&&r.forEach(function(n){if(n.canvasId==t){n.canvasLk=i;try{f=n.canvasCG%10==1?51:n.canvasCG>=10?44:n.canvasType}catch{}}}),n.ZITUtils.localStorageStore("_sxpca",JSON.stringify(r)),n.ZITUtils.writeDebug("Canvas Data click updated "+JSON.stringify(r))):n.ZITUtils.writeDebug("No Canvas Data to write.")}catch(e){n.ZITFunctions.sendRaygunData(e,"saveCanvasClickUrlToCookie-"+t)}return f},saveTrackingDataToSxo:function(i){typeof i!=t?(n.ZITUtils.createCookieinDetails("_sxo",JSON.stringify(i),365,0,0,0),n.ZITUtils.writeDebug("TrackingData updated "+JSON.stringify(i))):n.ZITUtils.writeDebug("No trackingData to write.");n.ZITFunctions.curTrackingData=i;n.SubxClientEvents.identifier=i.oS;n.SubxClientEvents.sessionId=n.ZITUtils.readCookie("sessionId")},retrieveIsSlideCloseCookie:function(){var t=parseInt(n.ZITUtils.readCookie("zit.npw.slide.close"))||0;return n.ZITFunctions.curTrackingData==null&&n.ZITFunctions.retrieveTrackingData(),n.ZITFunctions.curTrackingData!=null&&(n.ZITFunctions.curTrackingData.isSlideClose=t,n.ZITFunctions.curTrackingData.firstClickX=n.ZITFunctions.curTrackingData.firstClickX==1?1:n.ZITFunctions.curTrackingData.firstClickX==2?2:0,n.ZITFunctions.saveTrackingDataToSxo(n.ZITFunctions.curTrackingData)),n.ZITUtils.writeDebug("isSlideClose retrieved:"+t),t},retrieveIsSlideCloseSession:function(){var t=parseInt(n.ZITUtils.sessionStore("zit.npw.slide.close"))||0;return n.ZITFunctions.curTrackingData==null&&n.ZITFunctions.retrieveTrackingData(),n.ZITFunctions.curTrackingData!=null&&(n.ZITFunctions.curTrackingData.isSlideCloseAlt=t,n.ZITFunctions.saveTrackingDataToSxo(n.ZITFunctions.curTrackingData)),n.ZITUtils.writeDebug("isSlideCloseAlt retrieved:"+t),t},setCanvas:function(t){t==1?(n.ZITFunctions.showCanvas=n.ZITFunctions.showCanvas+1,n.ZITFunctions.processedCanvas=n.ZITFunctions.processedCanvas+1,n.ZITUtils.writeDebug("Canvas counter has been updated."+n.ZITFunctions.showCanvas+" "+n.ZITFunctions.processedCanvas+" "+n.ZITFunctions.totalCanvas)):(n.ZITFunctions.processedCanvas=n.ZITFunctions.processedCanvas+1,n.ZITUtils.writeDebug("Canvas counter has been updated."+n.ZITFunctions.showCanvas+" "+n.ZITFunctions.processedCanvas+" "+n.ZITFunctions.totalCanvas));n.ZITFunctions.processedCanvas>=n.ZITFunctions.totalCanvas&&n.ZITFunctions.showCanvas<=0&&n.ZITFunctions.sendtoBlueConic("no-subx")},getCookieValue:function(t){var i=n.ZITUtils.readCookie(t)||"";return n.ZITUtils.writeDebug(t+" retrieved:"+i),i},clearReaderCounter:function(){var t=n.ZITFunctions.retrieveTrackingData(),i;n.SubxClientEvents&&typeof n.SubxClientEvents.clearReaderCounter!="undefined"?n.SubxClientEvents.clearReaderCounter(t):n.ZITFunctions.spwCookieName=="_spw"&&(i=n.ZITUtils.readCookie("_rA"),(typeof i=="undefined"||i==null)&&n.ZITUtils.createCookieinDetails("_rA",t.RA,30,0,0,0));n.ZITFunctions.spwCookieName=="_spw"?(t.dM=0,t.sM=0,t.tM=0,t.RA=0,t.tWids=[],this.saveTrackingDataToSxo(t),n.ZITUtils.writeDebug("ReaderCounter has been cleared")):n.ZITFunctions.spwCookieName=="_sspw"?(t.dM2=0,t.sM2=0,t.tM2=0,this.saveTrackingDataToSxo(t),n.ZITUtils.writeDebug("Special ReaderCounter has been cleared")):n.ZITUtils.writeDebug("No ReaderCounter needs to clear "+n.ZITFunctions.spwCookieName)},updateReaderCounter:function(t){var i,r;n.SubxClientEvents&&typeof n.SubxClientEvents.updateReaderCounter!="undefined"&&n.SubxClientEvents.updateReaderCounter(t);i=n.ZITFunctions.retrieveTrackingData();typeof n.SubxClientEvents.isSpecialSection!="undefined"&&n.SubxClientEvents.isSpecialSection()?(r=parseInt(i.dM2)+parseInt(i.tM2),t>r&&(i.dM2=parseInt(i.dM2)+parseInt(t-r),i.sM2=parseInt(i.sM2)+parseInt(t-r),n.ZITUtils.writeDebug("dM2,sM2 updated:"+(t-r)),n.SubxClientEvents.addArticleId())):(t>i.RA&&(i.dM=parseInt(i.dM)+parseInt(t-i.RA),i.sM=parseInt(i.sM)+parseInt(t-i.RA),n.ZITUtils.writeDebug("dM,sM updated:"+(t-i.RA)),n.SubxClientEvents.addArticleId()),i.RA=t);this.saveTrackingDataToSxo(i);n.ZITUtils.writeDebug("RA updated:"+i.RA)},updateOrigSession:function(t){var i=n.ZITFunctions.retrieveTrackingData();i.oS=t;this.saveTrackingDataToSxo(i);n.ZITUtils.writeDebug("oS updated:"+t)},setEmailAud:function(){var t=n.ZITFunctions.retrieveTrackingData();t.isEmailAud=1;this.saveTrackingDataToSxo(t);n.ZITUtils.writeDebug("existing email Aud updated:"+t.isEmailAud)},setExpAud:function(){var t=n.ZITFunctions.retrieveTrackingData();t.isExAud=1;this.saveTrackingDataToSxo(t);n.ZITUtils.writeDebug("ExpAud updated:"+t.isExAud)},setRegAud:function(){var t=n.ZITFunctions.retrieveTrackingData();t.isEmailAud=1;t.isRegAud=1;this.saveTrackingDataToSxo(t);(n.ZITFunctions.getCookieValue("_sxRD")||"")==""?(n.ZITUtils.createCookieinDetails("_sxRD",n.ZITUtils.readCookie("sessionId"),365,0,0,0),n.ZITUtils.writeDebug("_sxRD updated:"+n.ZITUtils.readCookie("sessionId"))):n.ZITUtils.writeDebug("_sxRD exists:"+n.ZITFunctions.getCookieValue("_sxRD"));n.ZITUtils.createCookie("_spw","",-1);n.ZITUtils.createCookie("_sspw","",-1);n.ZITUtils.writeDebug("RegAud updated:1")},resetGTMAcc:function(){var t=n.ZITFunctions.retrieveTrackingData();t.GTMTag="";t.accNo="";this.saveTrackingDataToSxo(t);n.ZITUtils.writeDebug("GTM Account has been reset")},getUserName:function(){var t=n.ZITUtils.readCookie("_sue")||"";return n.ZITUtils.writeDebug("new username retrieved:"+t),t},setMembership:function(){n.ZITUtils.createCookieinDetails("_isMemAud",1,30,0,0,0);(n.ZITFunctions.getCookieValue("_sxMD")||"")==""?(n.ZITUtils.createCookieinDetails("_sxMD",n.ZITUtils.readCookie("sessionId"),365,0,0,0),n.ZITUtils.writeDebug("_sxMD updated:"+n.ZITUtils.readCookie("sessionId"))):n.ZITUtils.writeDebug("_sxMD exists:"+n.ZITFunctions.getCookieValue("_sxMD"));this.setRegAud();n.ZITUtils.writeDebug("Membership updated:1")},setLogIn:function(t){var i,r;n.SubxClientEvents&&typeof n.SubxClientEvents.setLogIn!="undefined"?n.SubxClientEvents.setLogIn(t):(i=n.ZITFunctions.retrieveTrackingData(),n.ZITUtils.createCookieinDetails("_rA",i.RA,30,0,0,0),n.ZITUtils.createCookie("_spw","",-1),r=n.ZITUtils.readCookie("_rAReg"),r&&r>0?(i.RA=r,i.tM=0,i.dM=r,i.sM=r,this.saveTrackingDataToSxo(i),n.ZITUtils.createCookie("_rAReg","",-1)):(i.RA=0,i.tM=0,i.dM=0,i.sM=0,this.saveTrackingDataToSxo(i)),n.SubxClientEvents&&typeof n.SubxClientEvents.CopyFromTrackingData!="undefined"&&n.SubxClientEvents.CopyFromTrackingData(i))},setLogOut:function(){var i,t;n.ZITUtils.createCookie("_spw","",-1);n.SubxClientEvents&&typeof n.SubxClientEvents.setLogOut!="undefined"?n.SubxClientEvents.setLogOut():(t=n.ZITFunctions.retrieveTrackingData(),i=n.ZITUtils.readCookie("_rA"),i&&i>0?(t.RA=i,t.tM=0,t.dM=i,t.sM=i,n.ZITUtils.createCookie("_rA","",-1)):(t.RA=0,t.tM=0,t.dM=0,t.sM=0),this.saveTrackingDataToSxo(t),n.ZITUtils.createCookieinDetails("_rAReg",t.RA,30,0,0,0));t=n.ZITFunctions.retrieveTrackingData();t.isEmailAud=0;t.isRegAud=0;this.saveTrackingDataToSxo(t);n.ZITFunctions&&(n.ZITFunctions.sendGAData(115,"Click to Log Out",n.ZITUtils.readCookie("_sue"),"Membership",!1),n.ZITFunctions.sendCWPClickData(n.ZITFunctions.apiKey,115,t.oS,n.ZITUtils.readCookie("sessionId"),n.ZITFunctions.brandId,0,0,n.location.href));n.ZITUtils.createCookie("_isMemAud","",-1);n.ZITUtils.createCookie("_sue","",-1);n.ZITUtils.createCookie("_sxMD","",-1);n.ZITUtils.createCookie("_sxRD","",-1);n.ZITUtils.createCookie("_MChecked","",-1);n.ZITUtils.createCookie("_sf","",-1);n.ZITUtils.writeDebug("Membership updated:1")},setUserName:function(t){n.SubxClientEvents&&typeof n.SubxClientEvents.setUserName!="undefined"?n.SubxClientEvents.setUserName(t):(n.ZITUtils.createCookieinDetails("_sue",t,365,0,0,0),n.ZITUtils.writeDebug("new username updated:"+t))},setFilterOut:function(t){n.ZITUtils.createCookieinDetails("_sf",t,0,0,20,0);n.ZITUtils.writeDebug("update filter out flag:"+t)},setDropOffAud:function(t){var i=n.ZITFunctions.retrieveTrackingData();(!i.isDropoff||i.isDropoff<t)&&(i.isDropoff=t);this.saveTrackingDataToSxo(i);n.ZITUtils.writeDebug("new dropoff group updated:"+i.oS)},setSubscriberAud:function(t){var i=n.ZITFunctions.retrieveTrackingData();i.isPanelAud=t;this.saveTrackingDataToSxo(i);n.ZITUtils.writeDebug("existing subscriber Aud updated:"+i.oS)},saveCanvasData:function(n,t,i){var r={canvasId:n.wid,canvasAn:n.animationType,canvasCT:n.widgetType,authId:i.authId,promoName:"",linkText:"",canvasName:n.widgetName,canvasCG:n.isContentGate+n.isMembership,canvasType:i.actionType,canvasLk:""};this.saveCanvasDataToCookie(r,t)},setDatawallFlag:function(){var t=n.ZITFunctions.retrieveTrackingData();t.hDW=1;this.saveTrackingDataToSxo(t);n.ZITUtils.writeDebug("existing subscriber Aud updated:"+t.oS)},sendControlData:function(t,i,r,f,e,o,s){if(n.ZITFunctions.isDNT==1)n.ZITUtils.writeDebug("sendControlData DNT datatracking disabled.");else{var h=n.ZITFunctions.retrieveOrigSession(),c=n.ZITFunctions.retrieveCurSession(),l=n.ZITFunctions.retrieveDeviceType(),a=n.ZITFunctions.retrieveVisitorType(),v={apiKey:i,action:t,origId:h,cursession:c,external:0,pid:r,host:n.ZITFunctions.host(),cid:f,wid:e,salesplan:o,extData:s,vtype:a,dtype:l};n.ZITUtils.xdr(u.getDataTrackingScript(r),"POST",JSON.stringify(v),function(t){var i=JSON.parse(t);i&&i.Result==0?(n.ZITUtils.sessionStore("zit.data.cursessionid",i.origId),i.AudGroup&&ZITFunctions.setSubscriberAud(i.AudGroup),i.EmailGroup&&i.EmailGroup==1&&ZITFunctions.setEmailAud(),i.DropoffGroup&&i.DropoffGroup!=0&&ZITFunctions.setDropOffAud(i.DropoffGroup)):n.ZITUtils.writeDebug("data tracking re: "+i.origId)},function(n){console.error("error: "+n)})}},sendCampaignData:function(t,i,r,f){var e,a;if(n.ZITFunctions.isDNT==1)n.ZITUtils.writeDebug("sendCampaignData DNT datatracking disabled.");else{var s=n.ZITUtils.readCookie("_sxo"),h="",o="";if(n.ZITloader&&(o=n.ZITloader.getQueryString("dtId")),n.ZITUtils.writeDebug("Query string loaded "+o),s||o&&o!=""){e=JSON.parse(s);e&&e.oS&&e.oS!=""&&(h=e.oS);n.ZITUtils.writeDebug("id1 retrieved:"+h);var v=n.ZITFunctions.retrieveCurSession(),c=1,l=0;e&&(e.F>1||e.dS>1)&&(c=2);e&&typeof e.devT!="undefined"&&(l=e.devT);a={apiKey:i,action:t,origId:h,cursession:v,external:1,pid:r,extData:f,vtype:c,dtype:l};n.ZITUtils.xdr(u.getDataTrackingScript(r),"POST",JSON.stringify(a),function(t){var i=JSON.parse(t);i&&i.Result==0?(n.ZITUtils.sessionStore("zit.data.cursessionid",i.origId),i.AudGroup&&ZITFunctions.setSubscriberAud(i.AudGroup),i.EmailGroup&&i.EmailGroup==1&&ZITFunctions.setEmailAud(),i.DropoffGroup&&i.DropoffGroup!=0&&ZITFunctions.setDropOffAud(i.DropoffGroup)):n.ZITUtils.writeDebug("data tracking: "+i.origId)},function(n){console.error("error: "+n)})}else setTimeout(function(){var c,e,l,a,v;s=n.ZITUtils.readCookie("_sxo");c=0;(s||o&&o!="")&&(e=JSON.parse(s),o&&o!=""?h=o:e&&e.oS&&e.oS!=""&&(h=e.oS),e&&typeof e.devT!="undefined"&&(c=e.devT));l=1;s&&(s.F>1||s.dS>1)&&(l=2);n.ZITUtils.writeDebug("id2 retrieved:"+h);a=n.ZITFunctions.retrieveCurSession();v={apiKey:i,action:t,origId:h,cursession:a,external:1,pid:r,extData:f,vtype:l,dtype:c};n.ZITUtils.xdr(u.getDataTrackingScript(r),"POST",JSON.stringify(v),function(t){var i=JSON.parse(t),r;i&&i.Result==0?(i.origId&&i.origID!=""&&(r=n.ZITFunctions.retrieveTrackingData(),r.oS=i.origId,n.ZITFunctions.saveTrackingDataToSxo(r)),i.AudGroup&&ZITFunctions.setSubscriberAud(i.AudGroup),i.EmailGroup&&i.EmailGroup==1&&ZITFunctions.setEmailAud(),i.DropoffGroup&&i.DropoffGroup!=0&&ZITFunctions.setDropOffAud(i.DropoffGroup)):n.ZITUtils.writeDebug("data tracking returns: "+i.origId)},function(n){console.error("error: "+n)})},1500)}},sendCWPClickData:function(t,i,r,f,e,o,s,h,c){var y,l;if(n.ZITFunctions.isDNT==1)n.ZITUtils.writeDebug("sendCWPClickData DNT datatracking disabled.");else{var p=n.ZITFunctions.retrieveDeviceType(),w=n.ZITFunctions.retrieveVisitorType(),a="",v=h;c&&(y=n.ZITFunctions.host(),v=encodeURIComponent(n.location.href),a=n.ZITUtils.jsencrypt(y,h+"#"+c));(e==null||typeof e=="undefined")&&(e=n.ZITFunctions.brandId);n.ZITUtils.writeDebug("Data for "+e+" retrieved.");l={apiKey:t,action:i,origId:r,external:0,pid:e,cid:o,wid:s,extData:a,referal:v,cursession:f,vtype:w,dtype:p};n.ZITUtils.writeDebug("calling CWP data tracking "+JSON.stringify(l));n.ZITUtils.xdr(u.getDataTrackingScript(e),"POST",JSON.stringify(l),function(t){var i=JSON.parse(t);i&&i.Result==0?n.ZITUtils.writeDebug("successful "+i.origId):n.ZITUtils.writeDebug("data tracking re: "+i.origId)},function(t){n.ZITUtils.writeDebug("error: "+t)})}},sendClickData:function(t,i,r,f,e,o,s,h,c){var y,l;if(n.ZITFunctions.isDNT==1)n.ZITUtils.writeDebug("sendClickData DNT datatracking disabled.");else{var p=n.ZITFunctions.retrieveDeviceType(),w=n.ZITFunctions.retrieveVisitorType(),a="",v=h;c&&(y=n.ZITFunctions.host(),a=n.ZITUtils.jsencrypt(y,"{ refer: "+h+", text:"+c+"}"),v=n.location.href);l={apiKey:t,action:i,origId:r,external:1,pid:e,cid:o,wid:s,extData:a,referal:v,cursession:f,vtype:w,dtype:p};n.ZITUtils.writeDebug("calling click data tracking "+JSON.stringify(l));n.ZITUtils.xdr(u.getDataTrackingScript(e),"POST",JSON.stringify(l),function(t){var i=JSON.parse(t);i&&i.Result==0?n.ZITUtils.writeDebug("successful "+i.origId):n.ZITUtils.writeDebug("data tracking re: "+i.origId)},function(t){n.ZITUtils.writeDebug("error: "+t)})}},sendScrollData:function(t,i){if(n.ZITFunctions.isDNT==1)n.ZITUtils.writeDebug("sendClickData DNT datatracking disabled.");else{n.ZITUtils.writeDebug("scroll data called "+t+"#"+i);var f=n.ZITFunctions.host(),r={apiKey:n.ZITFunctions.apiKey,action:46,actionValue:i,origId:n.ZITFunctions.retrieveOrigSession(),external:0,pid:n.ZITFunctions.brandId,cid:0,wid:0,extData:n.ZITUtils.jsencrypt(f,t),referal:n.location.href,cursession:n.ZITFunctions.retrieveCurSession(),vtype:n.ZITFunctions.retrieveVisitorType(),dtype:n.ZITFunctions.retrieveDeviceType()};n.ZITUtils.writeDebug("calling click data tracking "+JSON.stringify(r));n.ZITUtils.xdr(u.getDataTrackingScript(n.ZITFunctions.brandId),"POST",JSON.stringify(r),function(t){var i=JSON.parse(t);i&&i.Result==0?n.ZITUtils.writeDebug("successful "+i.origId):n.ZITUtils.writeDebug("data tracking re: "+i.origId)},function(t){n.ZITUtils.writeDebug("error: "+t)})}},sendGAPGData:function(t,i){var r;if(n.ZITFunctions.isDNT==1)n.ZITUtils.writeDebug("sendGAPGData DNT datatracking disabled.");else if(n.ZITFunctions.gaEnabled){if(r=n.ZITUtils.readCookie("_sxo"),r){var f=JSON.parse(r),u=f.accNo,e=f.bid;n.ga&&ga.create||function(n,t,i,r,u,f,e){n.GoogleAnalyticsObject=u;n[u]=n[u]||function(){(n[u].q=n[u].q||[]).push(arguments)};n[u].l=1*new Date;f=t.createElement(i);e=t.getElementsByTagName(i)[0];f.async=1;f.src=r;e.parentNode.insertBefore(f,e)}(n,document,"script","https://www.google-analytics.com/analytics.js","ga");u!=""&&ga&&(ga("create",u,"auto"),ga(function(t){n.ZITUtils.writeDebug("New tracker created Acc:"+u+" Name:"+t.get("name"))}),typeof i!="undefined"?ga("send","pageview",{dimension1:e,dimension2:t,dimension3:i}):ga("send","pageview",{dimension1:e,dimension2:t}))}}else n.ZITUtils.writeDebug("GAPG disabled!")},sendGAData:function(t,i,r,u,f,e){if(n.ZITFunctions.isDNT==1)n.ZITUtils.writeDebug("sendGAData DNT datatracking disabled.");else try{var o=n.ZITUtils.readCookie("_sxo");o&&typeof n.SubxClientEvents.sendDataEvent!="undefined"?(n.ZITUtils.writeDebug("ZITsendGAData:"+t+"#"+i+"#"+r+"#"+u+"#"+f+"#"+n.ZITFunctions.brandId+"#"+e),n.SubxClientEvents.sendDataEvent(t,i,r,n.ZITFunctions.brandId,e)):n.ZITUtils.writeDebug("Skip tracking for no cookie object found or not Heart brands")}catch(s){n.ZITFunctions.sendRaygunData(s,"Error in sendGAData")}},sendRaygunData:function(t,i){!function(n,t,i,r,u,f,e,o){n.RaygunObject=u;n[u]=n[u]||function(){(n[u].o=n[u].o||[]).push(arguments)};f=t.createElement(i);e=t.getElementsByTagName(i)[0];f.async=1;f.src=r;e.parentNode.insertBefore(f,e);o=n.onerror;n.onerror=function(t,i,r,f,e){o&&o(t,i,r,f,e);e||(e=new Error(t));n[u].q=n[u].q||[];n[u].q.push({e:e})}}(n,document,"script","//cdn.raygun.io/raygun4js/raygun.min.js","rg4js");rg4js("apiKey","LRAN3VFUmhiYmftvwrsDcw");rg4js("options",{wrapAsynchronousCallbacks:!1,debugMode:!0,ignore3rdPartyErrors:!1,disableErrorTracking:!1,disablePulse:!0,pulseMaxVirtualPageDuration:18e5,pulseIgnoreUrlCasing:!1,automaticPerformanceCustomTimings:!1});var r=n.ZITUtils.readCookie("_sue")||"",u=!0;r&&r!=""&&(u=!1);rg4js("setUser",{identifier:n.ZITFunctions.retrieveOrigSession(),isAnonymous:u});rg4js("send",{error:t,tags:[i]})},sendDataLayer:function(t,i,r){var f,u;if(n.ZITFunctions.isDNT==1)n.ZITUtils.writeDebug("sendDataLayer DNT datatracking disabled.");else if(n.ZITFunctions.dlEnabled)try{n.ZITUtils.writeDebug("push to dataLayer "+t);n.dataLayer?(n.ZITFunctions.InitiateDataLayer(),typeof n.ZITFunctions.curDataLayer!="undefined"?(f=n.ZITFunctions.retrieveOrigSession(),n.ZITFunctions.curDataLayer.event=t,n.ZITFunctions.curDataLayer.sxId=f,u={sxCn:r,sxId:n.ZITFunctions.curDataLayer.sxId,sxCid:i,sxTid:n.ZITFunctions.curDataLayer.sxTid,event:n.ZITFunctions.curDataLayer.event,sxTg:-1},u.sxTg=n.ZITFunctions.retrieveNBA(),t=="subx-pageview"&&typeof n.ZITFunctions.curDataLayer.sxTid!="undefined"&&n.ZITFunctions.curDataLayer.sxTid!=""?(u.sxCid=0,u.sxTid=n.ZITFunctions.curDataLayer.sxTid.split(",")):u.sxTid=(t=="subx-completion"||t=="subx-impression")&&typeof n.ZITFunctions.curDataLayer.sxTid!="undefined"&&n.ZITFunctions.curDataLayer.sxTid!=""?n.ZITFunctions.curDataLayer.sxTid.split(","):[],n.ZITUtils.writeDebug(t+" "+JSON.stringify(u)),n.dataLayer.push(u)):n.ZITUtils.writeDebug("dataLayer is undefined")):n.ZITUtils.writeDebug("window.dataLayer is undefined")}catch(e){n.ZITFunctions.sendRaygunData(e,"Error in sending to datalayer V2")}else n.ZITUtils.writeDebug("Send to DataLayer is disabled")},findValueFromDataLayer:function(t){try{var r;for(i in n.google_tag_manager)typeof n.google_tag_manager[i]=="object"&&n.google_tag_manager[i].gtmDom&&(r=i);if(typeof n.google_tag_manager!="undefined")for(i in n[r])if(n[r]&&n[r][i]&&n[r][i][t])return n[r][i][t]}catch(u){n.ZITFunctions.sendRaygunData(u,"Error in findValueFromDataLayerV5")}return""},findFromDataLayer:function(t,r){var u;try{for(i in n.google_tag_manager)typeof n.google_tag_manager[i]=="object"&&n.google_tag_manager[i].gtmDom&&(u=i);if(typeof n.google_tag_manager!="undefined")for(i in n[u])if(r&&r!=""){if(n[u][i][t]&&n[u][i][t]==r)return i}else if(n[u][i][t])return i}catch(f){n.ZITFunctions.sendRaygunData(f,"Error in findFromDataLayerV5")}return-1},readFromCookie:function(t){try{if(typeof t!="undefined"&&t!=""){var r=t.split(","),i=0;r.length>0&&r.forEach(function(t){if(t!=""){var u=n.ZITUtils.readCookie(t),r=i==0?"":i;n.ZITFunctions.cookieValue+="&fName"+r+"="+t+"&fValue"+r+"="+encodeURIComponent(u);i=i+1}})}}catch(u){n.ZITFunctions.sendRaygunData(u,"Error in readFromCookie")}},updateIdentityfromQS:function(t){var i=t.split(",");i.length>0&&i.forEach(function(t){var i,u,r;t!=""&&(i=0,t.startsWith("E_")?i=1:t.startsWith("S_")?i=2:t.startsWith("R_")?i=3:t.startsWith("M_")&&(i=4),u=!1,r="",i>0&&(t=t.substring(2,t.length),n.ZITUtils.writeDebug(t),r=n.location.href,r&&r.indexOf(t)>=0&&(u=!0),u&&(i==1?n.ZITFunctions.setEmailAud():i==2?n.ZITFunctions.setSubscriberAud(1):i==3?n.ZITFunctions.setRegAud():i==4&&n.ZITFunctions.setMembership()),n.ZITUtils.writeDebug(" ToUpdate:"+u+" "+i+" "+t+" "+r)))})},updateIdentityfromLS:function(t){if(localStorage){var i=t.split(",");i.length>0&&i.forEach(function(t){var i,u,r,f;t!=""&&(i=0,t.startsWith("E_")?i=1:t.startsWith("S_")?i=2:t.startsWith("R_")?i=3:t.startsWith("M_")&&(i=4),u=!1,r="",i>0&&(t=t.substring(2,t.length),n.ZITUtils.writeDebug(t),f=t.split("="),f.length>1?(r=localStorage.getItem(f[0]),r&&r.indexOf(f[1])>0&&(u=!0)):(r=localStorage.getItem(t),typeof r!="undefined"&&r!=null&&(u=!0)),u&&(i==1?n.ZITFunctions.setEmailAud():i==2?n.ZITFunctions.setSubscriberAud(1):i==3?n.ZITFunctions.setRegAud():i==4&&n.ZITFunctions.setMembership()),n.ZITUtils.writeDebug(" ToUpdate:"+u+" "+i+" "+t+" "+r)))})}},updateIdentityfromDL:function(t){var i=t.split(",");i.length>0&&i.forEach(function(t){var i,u,f,r;t!=""&&(i=0,t.startsWith("E_")?i=1:t.startsWith("S_")?i=2:t.startsWith("R_")?i=3:t.startsWith("M_")&&(i=4),u=!1,r="",i>0&&(n.ZITUtils.writeDebug(t),t=t.substring(2,t.length),f=t.split("="),f.length>1?(r=n.ZITFunctions.findValueFromDataLayer(f[0]),r&&r.indexOf(f[1])>0&&(u=!0)):(r=n.ZITFunctions.findValueFromDataLayer(t),typeof r!="undefined"&&r!=null&&(u=!0)),u&&(i==1?n.ZITFunctions.setEmailAud():i==2?n.ZITFunctions.setSubscriberAud(1):i==3?n.ZITFunctions.setRegAud():i==4&&n.ZITFunctions.setMembership()),n.ZITUtils.writeDebug(" ToUpdate:"+u+" "+i+" "+t+" "+r)))})},updateIdentityfromCookie:function(t){var i=t.split(",");i.length>0&&i.forEach(function(t){var i,u,r,f;t!=""&&(i=0,t.startsWith("E_")?i=1:t.startsWith("S_")?i=2:t.startsWith("R_")?i=3:t.startsWith("M_")&&(i=4),u=!1,r="",i>0&&(t=t.substring(2,t.length),n.ZITUtils.writeDebug(t),f=t.split("="),f.length>1?(r=n.ZITUtils.readCookie(f[0]),r&&r.indexOf(f[1])>0&&(u=!0)):(r=n.ZITUtils.readCookie(t),typeof r!="undefined"&&r!=null&&(u=!0)),u&&(i==1?n.ZITFunctions.setEmailAud():i==2?n.ZITFunctions.setSubscriberAud(1):i==3?n.ZITFunctions.setRegAud():i==4&&n.ZITFunctions.setMembership()),n.ZITUtils.writeDebug(" ToUpdate:"+u+" "+i+" "+t+" "+r)))})},readFromStorage:function(){if(localStorage)try{if(typeof r.localSt!="undefined"&&r.localSt!=""){var i=r.localSt.split(","),t=0;i.length>0&&i.forEach(function(i){if(i!=""){var u=localStorage.getItem(i),r=t==0?"":t;n.ZITFunctions.localStorageValue+="&lName"+r+"="+i+"&lValue"+r+"="+encodeURIComponent(u);t=t+1}})}}catch(u){n.ZITFunctions.sendRaygunData(u,"Error in readFromStorage")}else n.ZITFunctions.sendRaygunData(new Error("Local Storage is not supported."),"Error in readFromStorage")}};n.dataLayer=n.dataLayer||[];n["ZIT.Functions"]=n.ZITFunctions;n["ZIT.Utils"]=n.ZITUtils;n.ZITFunctions.brandId=1066;var c=n.ZITUtils.readCookie("zit.data.toexclude"),l=0,s=0,ut=!0,e=!1,a=0,ft=!1,k=(new Date).getTime();if(n.SubxSetting==null&&(n.SubxClientEvents&&typeof n.SubxClientEvents.getBrandIdFromDomain!="undefined"?(d=n.SubxClientEvents.getBrandIdFromDomain(),n.ZITUtils.writeDebug("Brand retrieved "+d),n.SubxSettings.forEach(function(t){t.brandId==d&&(n.SubxSetting=t,n.ZITFunctions.brandId=t.brandId,n.SubxSetting.isPath=!1)})):(n.SubxSettings.forEach(function(t){n.location.href.indexOf(t.WidgetDomain)>=0&&t.isPath&&(n.SubxSetting=t,n.ZITFunctions.brandId=t.brandId)}),n.SubxSetting==null&&n.SubxSettings.forEach(function(t){n.location.href.indexOf(t.WidgetDomain)>=0&&!t.isPath&&(n.SubxSetting=t,n.ZITFunctions.brandId=t.brandId)}))),n.SubxSetting==null){n.ZITUtils.writeDebug("No brand setting is retrieved.");return}n.SubxSetting.isPath&&(g=n.SubxSetting.WidgetDomain,n.location.href.indexOf(g)<0?(n.ZITFunctions.brandId=1066,e=!0,n.ZITUtils.writeDebug("Not target Path "+n.ZITFunctions.brandId),nt=n.ZITloader.getQueryString("origSession")||"",nt!=""&&(r=n.ZITFunctions.InitiateTrackingData(),r.oS=nt,n.ZITFunctions.saveTrackingDataToSxo(r))):n.ZITUtils.writeDebug("Target Path match "+n.ZITFunctions.brandId+" "+g+" "+n.location.href));n.ZITUtils.writeDebug("brandId retrieved "+n.ZITFunctions.brandId);typeof n.SubxDNT!="undefined"&&n.SubxDNT==1?(n.ZITUtils.writeDebug("DNT mode has been detected."),n.ZITFunctions.isDNT=1):n.ZITUtils.writeDebug("Normal mode has been detected.");c||(n.ZITUtils.createCookieinDetails("zit.data.toexclude",0,365,0,0,0),c=n.ZITUtils.readCookie("zit.data.toexclude"));!c&&n.ZITFunctions.host().indexOf(".zeddit.com")>=0&&(c="0",n.ZITUtils.writeDebug("approved by domain "+n.ZITFunctions.host()),ut=!1);y=n.ZITUtils.readCookie("__adblocker");y==null||typeof y=="undefined"?n.ZITloader.checkAdBlock():n.ZITUtils.writeDebug("adBlocker already checked:"+y);e=c&&c=="0"&&!e?!1:!0;n.ZITFunctions.brandId==0&&typeof n.SubxClientEvents!="undefined"&&(n.ZITUtils.writeDebug("SubxTech: unsupported domain."),e=!0);e?n.ZITUtils.writeDebug("cookie disabled, canvas is disabled"):(typeof n.JOURNEY_INFO=="undefined"&&(n.JOURNEY_INFO={status:"pending"},typeof n.SubxClientEvents!="undefined"&&typeof n.SubxClientEvents.sendCustomizedEvent!="undefined"&&n.SubxClientEvents.sendCustomizedEvent("journey-info",n.JOURNEY_INFO),n.ZITUtils.writeDebug("window.Journey_Info created to "+JSON.stringify(n.JOURNEY_INFO))),n.SubxClientEvents&&typeof n.SubxClientEvents.AddCustomizedEventListener!="undefined"&&n.SubxClientEvents.AddCustomizedEventListener(),ut?(r=n.ZITFunctions.InitiateTrackingData(),r.ToBlock=-1,r.oS!=""&&r.oS!=null&&n.SubxClientEvents&&typeof n.SubxClientEvents.sendOrigSessionUpdateEvent!="undefined"&&n.SubxClientEvents.sendOrigSessionUpdateEvent(r.oS,null),r.isEmailAud==0&&n.ZITUtils.localStorageStore("zit.pass")!=null&&n.ZITUtils.localStorageStore("zit.pass")!=""&&(r.isEmailAud=1,r.isRegAud=1,n.ZITUtils.writeDebug("Retrieve pass from storage ")),o=n.ZITFunctions.retrieveSFOTrackingData(),r.oS==""&&o&&o.origSession!=""&&(r.oS=o.origSession,r.RA=o.readArticle,n.ZITFunctions.saveTrackingDataToSxo(r)),n.ViewerLoader.isFirstRegWall=o.hideNomralCanvasOnFirstReg&&o.hideNomralCanvasOnFirstReg==1?1:0,o&&o.hascanvas==1&&n.ZITloader.loadDependencies(u.getJqueryScript()).then(function(){n.ZITloader.loadDependencies(u.getNewCanvasScript(0)).then(function(){n.ZITloader.loadDependencies(u.getFormValidationScript()).then(function(){n.ZITloader.loadDependencies(u.getCryptoScript()).then(function(){n.ZITloader.loadDependencies(u.getNewCanvasPostScript(0)).then(function(){n.ZITloader.loadDependencies(u.getJqueryIdletimerScript()).then(function(){o.isReCaptchaOn?(n.SubxClientEvents.hasRecaptcha=!0,n.dispatchEvent(new CustomEvent("addRecaptcha",{})),n.ZITloader.loadDependencies(u.getRecaptchaAPIScript(o.reCaptchaSiteKey)).then(function(){setTimeout(n.ZITloader.initContainer(o.isReCaptureOn,o.reCaptchaSiteKey,o.reCaptchaSecretKey),250)})):setTimeout(n.ZITloader.initContainer(o.isReCaptureOn,o.reCaptchaSiteKey,o.reCaptchaSecretKey),250)})})})})})}),tt=n.ZITloader.getQueryString("code")||"",tt!=""&&(it=n.ZITloader.getQueryString("state")||"",n.ZITFunctions.retrieveOrigSession()==it?(n.ZITFunctions.setRegAud(),n.ZITUtils.createCookieinDetails("_sue",tt,365,0,0,0),n.location.href=n.ZITFunctions.retrieveRetUrl()):n.ZITUtils.writeDebug("Invalid register status "+it+" "+n.ZITFunctions.retrieveOrigSession())),p=n.ZITUtils.readCookie("_sxoSource"),p!=null&&p!=""&&(n.SubxClientEvents.Source=p),n.ZITFunctions.InitiateDataLayer(),r.accNo=n.SubxSetting.GAAccount,n.ZITFunctions.brandId=n.SubxSetting.brandId,r.bid=n.SubxSetting.brandId,r.isReCaptchaOn=n.SubxSetting.isReCaptchaOn,r.isReCaptchaOn?(r.reCaptchaSiteKey=n.ZITUtils.encrypt(n.SubxSetting.reCaptchaSiteKey),r.reCaptchaSecretKey=n.ZITUtils.encrypt(n.SubxSetting.reCaptchaSecretKey)):(r.reCaptchaSiteKey="",r.reCaptchaSecretKey=""),n.ZITFunctions.categoryNo=parseInt(n.SubxSetting.categoryUrlNo),n.ZITFunctions.apiKey=n.SubxSetting.ApiKey,n.SubxSetting.PreHtmlCode!=""&&(w=document.createElement("div"),w.id="subxCodeContainer",w.innerHTML=n.SubxSetting.PreHtmlCode,document.body.insertAdjacentElement("afterbegin",w)),n.ZITFunctions&&n.SubxSetting.GTMTag&&n.SubxSetting.GTMTag!=""?(n.ZITFunctions.dlEnabled=!0,n.ZITFunctions.dataLayer=1,r.GTMTag=n.SubxSetting.GTMTag,n.ZITFunctions.dataLayerName=n.SubxSetting.GTMTag,typeof n.SubxSetting.DLIdentity!="undefined"&&n.SubxSetting.DLIdentity!=""&&n.ZITFunctions.updateIdentityfromDL(n.SubxSetting.DLIdentity)):(n.ZITFunctions.isAnalysisProcessed=!0,n.ZITUtils.writeDebug("ZITFunctions not exits or GTMTag is empty")),typeof n.SubxSetting.ckIdentity!="undefined"&&n.SubxSetting.ckIdentity!=""&&n.ZITFunctions.updateIdentityfromCookie(n.SubxSetting.ckIdentity),typeof n.SubxSetting.lsIdentity!="undefined"&&n.SubxSetting.lsIdentity!=""&&n.ZITFunctions.updateIdentityfromLS(n.SubxSetting.lsIdentity),typeof n.SubxSetting.qsIdentity!="undefined"&&n.SubxSetting.qsIdentity!=""&&n.ZITFunctions.updateIdentityfromQS(n.SubxSetting.qsIdentity),n.ZITFunctions.saveTrackingDataToSxo(r),n.ZITloader.getDataWallTiming()):(b=n.ZITloader.getQueryString("dtId"),b!=null&&b!=""&&r.oS==""&&n.ZITFunctions.updateOrigSession(b),n.ZITFunctions.curSession="",n.ZITFunctions.brandId=n.ZITloader.getQueryString("pid"),n.ZITUtils.writeDebug("Initial tracking data "+n.ZITFunctions.brandId)),n.SubxClientEvents.InitiateEvents())})(window);